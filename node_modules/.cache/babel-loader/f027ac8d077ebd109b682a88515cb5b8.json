{"ast":null,"code":"import _slicedToArray from\"C:/Users/\\u041C\\u0438\\u0445\\u0430\\u0438\\u043B/dev/movies-explorer-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import'./MoviesCard.css';import React,{useCallback,useEffect,useState}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function MoviesCard(props){var _useState=useState(true),_useState2=_slicedToArray(_useState,2),isCardFavouritesClicked=_useState2[0],setIsCardFavouritesClicked=_useState2[1];var setLikes=useCallback(function(){var likesCard=props.saveMovies.find(function(movie){return movie.movieId===props.id;});if(likesCard){setIsCardFavouritesClicked(true);}else{setIsCardFavouritesClicked(false);}},[props.id,props.saveMovies]);useEffect(function(){setLikes();},[setLikes]);var movieButtonFavouritesClassName=\"button cardMovie__button-favourites \".concat(isCardFavouritesClicked?\"cardMovie__button-favourites-active\":\"\");var movieButtonDeleteClassName=\"button cardMovie__delete\";function handleLikeClick(evt){evt.stopPropagation();if(!isCardFavouritesClicked){props.onSaveMovie({country:props.country||\"default\",director:props.director,duration:props.duration,year:props.year,description:props.description,image:props.image.url?\"https://api.nomoreparties.co/\".concat(props.image.url):\"https://www.youtube.com\",trailerLink:props.trailerLink,movieId:props.id,nameRU:props.nameRU,nameEN:props.nameEN,thumbnail:props.image.formats.thumbnail.url?\"https://api.nomoreparties.co/\".concat(props.image.formats.thumbnail.url):\"https://www.youtube.com\",owner:props.owner});setIsCardFavouritesClicked(true);}else{var saveCard=props.saveMovies.find(function(movie){return movie.movieId===props.id;});props.handleDeleteSaveMovie(saveCard);setIsCardFavouritesClicked(false);}}function handleDeleteClick(evt){props.handleDeleteSaveMovie(props);}function getTimeFromMins(mins){var hours=Math.trunc(mins/60);var minutes=mins%60;return hours+\"ч \"+minutes+\"м\";}var style={textDecoretion:\"none\"};return/*#__PURE__*/_jsxs(\"div\",{className:\"cardMovie__card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"cardMovie__box-heading\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"cardMovie__heading\",children:props.nameRU}),/*#__PURE__*/_jsx(\"button\",{className:props.pathSavedMovies?movieButtonDeleteClassName:movieButtonFavouritesClassName,type:\"button\",onClick:props.pathSavedMovies?handleDeleteClick:handleLikeClick}),/*#__PURE__*/_jsx(\"p\",{className:\"cardMovie__duration\",children:getTimeFromMins(props.duration)})]}),/*#__PURE__*/_jsx(\"a\",{className:style,href:props.trailerLink,target:\"_blank\",rel:\"noopener noreferrer\",children:/*#__PURE__*/_jsx(\"img\",{className:\"cardMovie__card-img\",alt:props.nameRU,src:!props.pathSavedMovies?\"https://api.nomoreparties.co/\".concat(props.image.url):props.image})})]});}export default MoviesCard;","map":{"version":3,"names":["React","useCallback","useEffect","useState","MoviesCard","props","isCardFavouritesClicked","setIsCardFavouritesClicked","setLikes","likesCard","saveMovies","find","movie","movieId","id","movieButtonFavouritesClassName","movieButtonDeleteClassName","handleLikeClick","evt","stopPropagation","onSaveMovie","country","director","duration","year","description","image","url","trailerLink","nameRU","nameEN","thumbnail","formats","owner","saveCard","handleDeleteSaveMovie","handleDeleteClick","getTimeFromMins","mins","hours","Math","trunc","minutes","style","textDecoretion","pathSavedMovies"],"sources":["C:/Users/Михаил/dev/movies-explorer-frontend/src/components/MoviesCard/MoviesCard.js"],"sourcesContent":["import './MoviesCard.css';\r\nimport React, { useCallback, useEffect, useState } from \"react\";\r\n\r\nfunction MoviesCard(props) {\r\n    const [isCardFavouritesClicked, setIsCardFavouritesClicked] = useState(true);\r\n\r\n  const setLikes = useCallback(() => {\r\n    const likesCard = props.saveMovies.find(\r\n      (movie) => movie.movieId === props.id\r\n    );\r\n    if (likesCard) {\r\n      setIsCardFavouritesClicked(true);\r\n    } else {\r\n      setIsCardFavouritesClicked(false);\r\n    }\r\n  }, [props.id, props.saveMovies]);\r\n\r\n  useEffect(() => {\r\n    setLikes();\r\n  }, [setLikes]);\r\n\r\n  const movieButtonFavouritesClassName = `button cardMovie__button-favourites ${\r\n    isCardFavouritesClicked ? \"cardMovie__button-favourites-active\" : \"\"\r\n  }`;\r\n\r\n  const movieButtonDeleteClassName = `button cardMovie__delete`;\r\n  function handleLikeClick(evt) {\r\n    evt.stopPropagation();\r\n    if (!isCardFavouritesClicked) {\r\n      props.onSaveMovie({\r\n        country: props.country || \"default\",\r\n        director: props.director,\r\n        duration: props.duration,\r\n        year: props.year,\r\n        description: props.description,\r\n        image: props.image.url\r\n          ? `https://api.nomoreparties.co/${props.image.url}`\r\n          : \"https://www.youtube.com\",\r\n        trailerLink: props.trailerLink,\r\n        movieId: props.id,\r\n        nameRU: props.nameRU,\r\n        nameEN: props.nameEN,\r\n        thumbnail: props.image.formats.thumbnail.url\r\n          ? `https://api.nomoreparties.co/${props.image.formats.thumbnail.url}`\r\n          : \"https://www.youtube.com\",\r\n        owner: props.owner,\r\n      });\r\n      setIsCardFavouritesClicked(true);\r\n    } else {\r\n      const saveCard = props.saveMovies.find(\r\n        (movie) => movie.movieId === props.id\r\n      );\r\n      props.handleDeleteSaveMovie(saveCard);\r\n      setIsCardFavouritesClicked(false);\r\n    }\r\n  }\r\n\r\n  function handleDeleteClick(evt) {\r\n    props.handleDeleteSaveMovie(props);\r\n  }\r\n\r\n  function getTimeFromMins(mins) {\r\n    let hours = Math.trunc(mins / 60);\r\n    let minutes = mins % 60;\r\n    return hours + \"ч \" + minutes + \"м\";\r\n  }\r\n  const style = {\r\n    textDecoretion: \"none\",\r\n  };\r\n\r\n    return (\r\n        <div className='cardMovie__card'>\r\n            <div className='cardMovie__box-heading'>\r\n                <p className='cardMovie__heading'>{props.nameRU}</p>\r\n                <button \r\n                    className={\r\n                        props.pathSavedMovies\r\n                          ? movieButtonDeleteClassName\r\n                          : movieButtonFavouritesClassName\r\n                      }\r\n                      type=\"button\"\r\n                      onClick={\r\n                        props.pathSavedMovies ? handleDeleteClick : handleLikeClick\r\n                      }\r\n                />\r\n                <p className='cardMovie__duration'>{getTimeFromMins(props.duration)}</p>\r\n            </div>\r\n            <a\r\n                className={style}\r\n                href={props.trailerLink}\r\n                target=\"_blank\"\r\n                rel=\"noopener noreferrer\"\r\n            >\r\n                <img \r\n                    className='cardMovie__card-img' \r\n                    alt={props.nameRU}  \r\n                    src={\r\n                        !props.pathSavedMovies\r\n                          ? `https://api.nomoreparties.co/${props.image.url}`\r\n                          : props.image\r\n                    }\r\n                />\r\n            </a>\r\n        </div>  \r\n    );\r\n}\r\n\r\nexport default MoviesCard;"],"mappings":"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"},"metadata":{},"sourceType":"module"}