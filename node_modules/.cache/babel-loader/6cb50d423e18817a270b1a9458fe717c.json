{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\\\u041C\\u0438\\u0445\\u0430\\u0438\\u043B\\\\dev\\\\movies-explorer-frontend\\\\src\\\\components\\\\App\\\\App.js\",\n    _s = $RefreshSig$();\n\nimport '../App/App.css';\nimport { useEffect, useState } from 'react';\nimport { Route, Switch, useLocation, useHistory } from 'react-router-dom';\nimport Main from '../Main/Main';\nimport Movies from '../Movies/Movies';\nimport SavedMovies from '../SavedMovies/SavedMovies';\nimport Register from '../Register/Register';\nimport Profile from '../Profile/Profile';\nimport Login from '../Login/Login';\nimport Error from \"../Error/Error\";\nimport { CurrentUserContext } from \"../context/CurrentUserContext\";\nimport mainApi from \"../../utils/MainApi\";\nimport * as auth from \"../../utils/auth\";\nimport ProtectedRoute from \"../ProtectedRoute/ProtectedRoute\";\nimport moviesApi from \"../../utils/MoviesApi\";\nimport unionTrue from \"../../images/union.svg\";\nimport unionFalse from \"../../images/unionerror.svg\";\nimport BlockRouteUser from \"../BlockRouteUser/BlockRouteUser\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction App() {\n  _s();\n\n  const valueData = JSON.parse(localStorage.getItem(\"moviesSearchValue\"));\n  const location = useLocation();\n  const history = useHistory();\n  const [currentUser, setCurrentUser] = useState([]);\n  const [loggedIn, setLoggedIn] = useState(false);\n  const [movies, setMovies] = useState([]);\n  const [filterMovies, setFilterMovies] = useState([]);\n  const [saveMovies, setSaveMovies] = useState([]);\n  const [saveFilterSaveMovies, setFilterSaveMovies] = useState([]);\n  const [shortMovies, setShortMovies] = useState([]);\n  const [shortMoviesSave, setShortMoviesSave] = useState([]);\n  const [isData, setData] = useState({});\n  const [valueSearch, setValueSearch] = useState(valueData);\n  const [loaded, setLoaded] = useState(true);\n  const [isFiltered, setIsFiltered] = useState(false);\n  const [isFilteredSave, setIsFilteredSave] = useState(false);\n  const [checkedFilms, setCheckedFilms] = useState(false);\n  const [checkedSaveFilms, setCheckedSaveFilms] = useState(false);\n  const [permissonCheck, setPermissonCheck] = useState(false); // const pathHeadersArray = [\"/\", \"/movies\", \"/saved-movies\", \"/profile\"];\n  // const pathFootersArray = [\"/\", \"/movies\", \"/saved-movies\"];\n\n  const pathMovies = location.pathname === \"/movies\";\n  const pathMoviesSave = location.pathname === \"/saved-movies\"; // проверка токенов авторизованных пользователей, вернувшихся в приложение\n\n  function checkToken() {\n    const token = localStorage.getItem(\"token\");\n\n    if (token) {\n      auth.examinationValidationToken(token).then(res => {\n        setCurrentUser(res);\n        setLoggedIn(true);\n        localStorage.setItem(\"user\", JSON.stringify(res));\n      }).catch(err => {\n        console.log(err);\n        localStorage.removeItem(\"token\"); // handleInfoTooltip({\n        //   union: unionFalse,\n        //   text: \"Ошибка токена\",\n        // });\n      });\n    }\n  } // Загрузка данных пользователя и фильмов\n\n\n  useEffect(() => {\n    setLoaded(true);\n    setTimeout(() => {\n      if (loggedIn) {\n        Promise.all([moviesApi.getMovies(), mainApi.getAboutUser(), mainApi.getSaveMovies()]).then(_ref => {\n          let [movies, user, saveMovies] = _ref;\n          localStorage.setItem(\"user\", JSON.stringify(user));\n          setCurrentUser(JSON.parse(localStorage.getItem(\"user\")));\n          const userSaveMovie = saveMovies.filter(movie => movie.owner === user._id);\n          localStorage.setItem(\"saveMovies\", JSON.stringify(userSaveMovie));\n          localStorage.setItem(\"movies\", JSON.stringify(movies));\n          setSaveMovies(JSON.parse(localStorage.getItem(\"saveMovies\")));\n          setMovies(JSON.parse(localStorage.getItem(\"movies\")));\n          setLoaded(false);\n        }).catch(err => {\n          console.log(err); // handleInfoTooltip({\n          //   union: unionFalse,\n          //   text: \"Ошибка обновления данных\",\n          // });\n        });\n      }\n    }, 1000);\n  }, [loggedIn]);\n  useEffect(() => {\n    const token = localStorage.getItem(\"token\");\n\n    if (!token) {\n      setPermissonCheck(true);\n      return;\n    }\n\n    checkToken();\n    setPermissonCheck(true);\n    setLoggedIn(true);\n    setCheckedFilms(JSON.parse(localStorage.getItem(\"checkedFilms\")));\n    setCheckedSaveFilms(JSON.parse(localStorage.getItem(\"checkedSaveFilms\")));\n  }, []);\n  useEffect(() => {\n    setFilterMovies(JSON.parse(localStorage.getItem(\"moviesSearch\")));\n    setIsFiltered(JSON.parse(localStorage.getItem(\"isFiltered\")));\n  }, []); // Обновление короткометражек\n\n  useEffect(() => {\n    setShortMovies(JSON.parse(localStorage.getItem(\"durationMovieShort\")));\n    setShortMoviesSave(JSON.parse(localStorage.getItem(\"durationMovieShortSave\")));\n  }, []); // Поиск фильмов\n\n  function handleEnter(search) {\n    const moviesFilter = movies ? movies.filter(movie => {\n      return movie.nameRU.toLowerCase().includes(search.toLowerCase());\n    }) : [];\n    localStorage.setItem(\"moviesSearch\", JSON.stringify(moviesFilter));\n    localStorage.setItem(\"isFiltered\", JSON.stringify(true));\n    localStorage.setItem(\"moviesSearchValue\", JSON.stringify(search));\n    setTimeout(() => {\n      setLoaded(false);\n      setFilterMovies(JSON.parse(localStorage.getItem(\"moviesSearch\")));\n      setIsFiltered(JSON.parse(localStorage.getItem(\"isFiltered\")));\n      setValueSearch(JSON.parse(window.localStorage.getItem(\"moviesSearchValue\")));\n    }, 450);\n  } // Сохранение фильма\n\n\n  function handleSaveMovie(movieData) {\n    setSaveMovies([...saveMovies, movieData]);\n    mainApi.saveMovie(movieData).then(newMovie => {\n      setSaveMovies([...saveMovies, newMovie]);\n      localStorage.setItem(\"saveMovies\", JSON.stringify([...saveMovies, newMovie]));\n    }).catch(err => {\n      console.log(err); // handleInfoTooltip({\n      //   union: unionFalse,\n      //   text: \"Ошибка сохранения фильма\",\n      // });\n    });\n  } // Поиск сохраненных фильмов\n\n\n  function handleSearchSaveMovie(search) {\n    const moviesSaveFilter = saveMovies ? saveMovies.filter(movie => {\n      return movie.nameRU.toLowerCase().includes(search.toLowerCase());\n    }) : [];\n    localStorage.setItem(\"isFilteredSave\", JSON.stringify(true));\n    setTimeout(() => {\n      setLoaded(false);\n      setFilterSaveMovies(moviesSaveFilter);\n      setIsFilteredSave(JSON.parse(localStorage.getItem(\"isFilteredSave\")));\n    }, 450);\n  } // Функция удаления из избранного\n\n\n  function handleDeleteSaveMovie(saveMovie) {\n    mainApi.deleteMovie(saveMovie._id || saveMovie.id).then(() => {\n      const newCardsArr = saveMovies.filter(c => c._id !== saveMovie._id);\n      const newSavedCardsArr = saveMovies.filter(c => c._id !== saveMovie._id);\n      setSaveMovies(newCardsArr);\n      setFilterSaveMovies(newSavedCardsArr); // handleInfoTooltip({\n      //   union: unionTrue,\n      //   text: \"Фильм удален\",\n      // });\n\n      localStorage.removeItem(\"saveMovies\", JSON.stringify(newCardsArr));\n      localStorage.removeItem(\"saveMovies\", JSON.stringify(newSavedCardsArr));\n    }).catch(err => {\n      console.log(err); // handleInfoTooltip({\n      //   union: unionFalse,\n      //   text: \"Нельзя удалить чужой фильм\",\n      // });\n    });\n  } // Регистрация\n\n\n  function handleRegistration(name, email, password) {\n    auth.register(name, email, password).then(res => {\n      if (res) {\n        // handleInfoTooltip({\n        //   union: unionTrue,\n        //   text: \"Вы успешно зарегистрировались!\",\n        // });\n        handleAuthorization(email, password);\n        history.push(\"/movies\");\n      }\n    }).catch(err => {\n      console.log(err); // handleInfoTooltip({\n      //   union: unionFalse,\n      //   text: `Пользователь с таким email ${email} уже существует`,\n      // });\n    });\n  } // Авторизация\n\n\n  function handleAuthorization(emailLogin, passwordLogin) {\n    auth.authorization(emailLogin, passwordLogin).then(res => {\n      if (res) {\n        localStorage.setItem(\"token\", res.token);\n        localStorage.setItem(\"moviesSearch\", JSON.stringify(filterMovies));\n        window.localStorage.setItem(\"moviesSearchValue\", JSON.stringify(valueSearch));\n        setLoggedIn(true); // handleInfoTooltip({\n        //   union: unionTrue,\n        //   text: \"Вы успешно вошли!\",\n        // });\n\n        history.push(\"/movies\");\n      }\n    }).then(() => {\n      checkToken();\n    }).catch(err => {\n      console.log(err); // handleInfoTooltip({\n      //   union: unionFalse,\n      //   text: \"Вы ввели неправильный логин или пароль\",\n      // });\n    });\n  } // Обновление пользователя\n\n\n  function handleUpdateUser(user) {\n    mainApi.editProfile(user).then(user => {\n      setCurrentUser(user); // handleInfoTooltip({\n      //   union: unionTrue,\n      //   text: \"Профиль обновлен \",\n      // });\n\n      localStorage.setItem(\"user\", JSON.stringify(user));\n    }).catch(err => {\n      console.log(`Внимание! ${err}`); // handleInfoTooltip({\n      //   union: unionFalse,\n      //   text: `Пользователь с таким ${user.email} уже существует`,\n      // });\n    });\n  } // Короткометражки фильмов\n\n\n  function checkShortFilms(e) {\n    setLoaded(true);\n    localStorage.setItem(\"checkedFilms\", JSON.stringify(!checkedFilms));\n    setTimeout(() => {\n      if (!checkedFilms) {\n        const durationMovieShort = movies.filter(movie => movie.duration <= 40);\n        const durationMovieShortSearch = filterMovies.filter(movie => movie.duration <= 40);\n        localStorage.setItem(\"durationMovieShort\", JSON.stringify(durationMovieShort));\n        localStorage.setItem(\"durationMovieShort\", JSON.stringify(durationMovieShortSearch));\n        setShortMovies(JSON.parse(localStorage.getItem(\"durationMovieShort\")));\n      } else {\n        setMovies(movies);\n      }\n\n      setLoaded(false);\n    }, 450);\n    setCheckedFilms(!checkedFilms);\n  } // Короткометражки сохраненных фильмов\n\n\n  function checkShortFilmsSave(e) {\n    setLoaded(true);\n    localStorage.setItem(\"checkedSaveFilms\", JSON.stringify(!checkedSaveFilms));\n    setTimeout(() => {\n      if (!checkedSaveFilms) {\n        const durationMovieShortSave = saveMovies.filter(movie => movie.duration <= 40);\n        const durationMovieShortSaveSearch = saveFilterSaveMovies.filter(movie => movie.duration <= 40);\n        localStorage.setItem(\"durationMovieShortSave\", JSON.stringify(durationMovieShortSave));\n        localStorage.setItem(\"durationMovieShortSaveSearch\", JSON.stringify(durationMovieShortSaveSearch));\n        setShortMoviesSave(JSON.parse(localStorage.getItem(\"durationMovieShortSave\")));\n      } else {\n        setSaveMovies(saveMovies);\n      }\n\n      setLoaded(false);\n    }, 450);\n    setCheckedSaveFilms(!checkedSaveFilms);\n  } // Выход\n\n\n  function handleSignOut() {\n    setLoggedIn(false);\n    setCurrentUser([]);\n    setCheckedFilms(false);\n    setCheckedSaveFilms(false);\n    localStorage.clear();\n    history.push(\"/\");\n  }\n\n  if (!permissonCheck) {\n    return null;\n  }\n\n  return /*#__PURE__*/_jsxDEV(CurrentUserContext.Provider, {\n    value: currentUser,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"app\",\n      children: /*#__PURE__*/_jsxDEV(Switch, {\n        children: [/*#__PURE__*/_jsxDEV(Route, {\n          exact: true,\n          path: \"/\",\n          component: Main\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 369,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ProtectedRoute, {\n          path: \"/movies\",\n          component: Movies,\n          loggedIn: loggedIn,\n          handleEnter: handleEnter,\n          loaded: loaded,\n          isFiltered: isFiltered,\n          movies: movies,\n          filterMovies: filterMovies,\n          handleSaveMovie: handleSaveMovie,\n          saveMovies: saveMovies,\n          handleDeleteSaveMovie: movie => handleDeleteSaveMovie(movie),\n          checkShortFilms: checkShortFilms,\n          onCheckedFilms: checkedFilms,\n          shortMovies: shortMovies,\n          pathMovies: pathMovies,\n          valueSearch: valueSearch\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 370,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ProtectedRoute, {\n          path: \"/saved-movies\",\n          component: SavedMovies,\n          loggedIn: loggedIn,\n          loaded: loaded,\n          handleSearchSaveMovie: handleSearchSaveMovie,\n          isFilteredSave: isFilteredSave,\n          saveMovies: saveMovies,\n          handleDeleteSaveMovie: handleDeleteSaveMovie,\n          saveFilterSaveMovies: saveFilterSaveMovies,\n          checkShortFilmsSave: checkShortFilmsSave,\n          onCheckedSaveFilms: checkedSaveFilms,\n          shortMovies: shortMoviesSave,\n          pathMoviesSave: pathMoviesSave\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 388,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ProtectedRoute, {\n          path: \"/profile\",\n          component: Profile,\n          onUpdateUser: handleUpdateUser,\n          handleSignOut: handleSignOut,\n          loggedIn: loggedIn\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 403,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(BlockRouteUser, {\n          path: \"/signin\",\n          component: Login,\n          handleAuthorization: handleAuthorization,\n          loggedIn: loggedIn\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 410,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(BlockRouteUser, {\n          path: \"/signup\",\n          component: Register,\n          handleRegistration: handleRegistration,\n          loggedIn: loggedIn\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 416,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"*\",\n          component: Error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 422,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 368,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 367,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 366,\n    columnNumber: 5\n  }, this);\n}\n\n_s(App, \"LNqDe/Jgc2W4B0itMe127k8o2og=\", false, function () {\n  return [useLocation, useHistory];\n});\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["useEffect","useState","Route","Switch","useLocation","useHistory","Main","Movies","SavedMovies","Register","Profile","Login","Error","CurrentUserContext","mainApi","auth","ProtectedRoute","moviesApi","unionTrue","unionFalse","BlockRouteUser","App","valueData","JSON","parse","localStorage","getItem","location","history","currentUser","setCurrentUser","loggedIn","setLoggedIn","movies","setMovies","filterMovies","setFilterMovies","saveMovies","setSaveMovies","saveFilterSaveMovies","setFilterSaveMovies","shortMovies","setShortMovies","shortMoviesSave","setShortMoviesSave","isData","setData","valueSearch","setValueSearch","loaded","setLoaded","isFiltered","setIsFiltered","isFilteredSave","setIsFilteredSave","checkedFilms","setCheckedFilms","checkedSaveFilms","setCheckedSaveFilms","permissonCheck","setPermissonCheck","pathMovies","pathname","pathMoviesSave","checkToken","token","examinationValidationToken","then","res","setItem","stringify","catch","err","console","log","removeItem","setTimeout","Promise","all","getMovies","getAboutUser","getSaveMovies","user","userSaveMovie","filter","movie","owner","_id","handleEnter","search","moviesFilter","nameRU","toLowerCase","includes","window","handleSaveMovie","movieData","saveMovie","newMovie","handleSearchSaveMovie","moviesSaveFilter","handleDeleteSaveMovie","deleteMovie","id","newCardsArr","c","newSavedCardsArr","handleRegistration","name","email","password","register","handleAuthorization","push","emailLogin","passwordLogin","authorization","handleUpdateUser","editProfile","checkShortFilms","e","durationMovieShort","duration","durationMovieShortSearch","checkShortFilmsSave","durationMovieShortSave","durationMovieShortSaveSearch","handleSignOut","clear"],"sources":["C:/Users/Михаил/dev/movies-explorer-frontend/src/components/App/App.js"],"sourcesContent":["import '../App/App.css';\r\nimport { useEffect, useState } from 'react';\r\nimport { Route, Switch, useLocation, useHistory } from 'react-router-dom';\r\n\r\nimport Main from '../Main/Main';\r\nimport Movies from '../Movies/Movies';\r\nimport SavedMovies from '../SavedMovies/SavedMovies';\r\nimport Register from '../Register/Register';\r\nimport Profile from '../Profile/Profile';\r\nimport Login from '../Login/Login';\r\nimport Error from \"../Error/Error\";\r\n\r\nimport { CurrentUserContext } from \"../context/CurrentUserContext\";\r\nimport mainApi from \"../../utils/MainApi\";\r\nimport * as auth from \"../../utils/auth\";\r\nimport ProtectedRoute from \"../ProtectedRoute/ProtectedRoute\";\r\nimport moviesApi from \"../../utils/MoviesApi\";\r\n\r\nimport unionTrue from \"../../images/union.svg\";\r\nimport unionFalse from \"../../images/unionerror.svg\";\r\nimport BlockRouteUser from \"../BlockRouteUser/BlockRouteUser\";\r\n\r\nfunction App() {\r\n\r\n  const valueData = JSON.parse(localStorage.getItem(\"moviesSearchValue\"));\r\n  const location = useLocation();\r\n  const history = useHistory();\r\n  const [currentUser, setCurrentUser] = useState([]);\r\n  const [loggedIn, setLoggedIn] = useState(false);\r\n  const [movies, setMovies] = useState([]);\r\n  const [filterMovies, setFilterMovies] = useState([]);\r\n  const [saveMovies, setSaveMovies] = useState([]);\r\n  const [saveFilterSaveMovies, setFilterSaveMovies] = useState([]);\r\n  const [shortMovies, setShortMovies] = useState([]);\r\n  const [shortMoviesSave, setShortMoviesSave] = useState([]);\r\n  const [isData, setData] = useState({});\r\n  const [valueSearch, setValueSearch] = useState(valueData);\r\n  const [loaded, setLoaded] = useState(true);\r\n  const [isFiltered, setIsFiltered] = useState(false);\r\n  const [isFilteredSave, setIsFilteredSave] = useState(false);\r\n  const [checkedFilms, setCheckedFilms] = useState(false);\r\n  const [checkedSaveFilms, setCheckedSaveFilms] = useState(false);\r\n  const [permissonCheck, setPermissonCheck] = useState(false);\r\n  // const pathHeadersArray = [\"/\", \"/movies\", \"/saved-movies\", \"/profile\"];\r\n  // const pathFootersArray = [\"/\", \"/movies\", \"/saved-movies\"];\r\n  const pathMovies = location.pathname === \"/movies\";\r\n  const pathMoviesSave = location.pathname === \"/saved-movies\";\r\n\r\n  // проверка токенов авторизованных пользователей, вернувшихся в приложение\r\n  function checkToken() {\r\n    const token = localStorage.getItem(\"token\");\r\n    if (token) {\r\n      auth\r\n        .examinationValidationToken(token)\r\n        .then((res) => {\r\n          setCurrentUser(res);\r\n          setLoggedIn(true);\r\n          localStorage.setItem(\"user\", JSON.stringify(res));\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n          localStorage.removeItem(\"token\");\r\n          // handleInfoTooltip({\r\n          //   union: unionFalse,\r\n          //   text: \"Ошибка токена\",\r\n          // });\r\n        });\r\n    }\r\n  }\r\n\r\n  // Загрузка данных пользователя и фильмов\r\n  useEffect(() => {\r\n    setLoaded(true);\r\n    setTimeout(() => {\r\n      if (loggedIn) {\r\n        Promise.all([\r\n          moviesApi.getMovies(),\r\n          mainApi.getAboutUser(),\r\n          mainApi.getSaveMovies(),\r\n        ])\r\n          .then(([movies, user, saveMovies]) => {\r\n            localStorage.setItem(\"user\", JSON.stringify(user));\r\n            setCurrentUser(JSON.parse(localStorage.getItem(\"user\")));\r\n            const userSaveMovie = saveMovies.filter(\r\n              (movie) => movie.owner === user._id\r\n            );\r\n            localStorage.setItem(\"saveMovies\", JSON.stringify(userSaveMovie));\r\n            localStorage.setItem(\"movies\", JSON.stringify(movies));\r\n            setSaveMovies(JSON.parse(localStorage.getItem(\"saveMovies\")));\r\n            setMovies(JSON.parse(localStorage.getItem(\"movies\")));\r\n            setLoaded(false);\r\n          })\r\n          .catch((err) => {\r\n            console.log(err);\r\n            // handleInfoTooltip({\r\n            //   union: unionFalse,\r\n            //   text: \"Ошибка обновления данных\",\r\n            // });\r\n          });\r\n      }\r\n    }, 1000);\r\n  }, [loggedIn]);\r\n\r\n  useEffect(() => {\r\n    const token = localStorage.getItem(\"token\");\r\n    if (!token) {\r\n      setPermissonCheck(true);\r\n      return;\r\n    }\r\n    checkToken();\r\n    setPermissonCheck(true);\r\n    setLoggedIn(true);\r\n    setCheckedFilms(JSON.parse(localStorage.getItem(\"checkedFilms\")));\r\n    setCheckedSaveFilms(JSON.parse(localStorage.getItem(\"checkedSaveFilms\")));\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    setFilterMovies(JSON.parse(localStorage.getItem(\"moviesSearch\")));\r\n    setIsFiltered(JSON.parse(localStorage.getItem(\"isFiltered\")));\r\n  }, []);\r\n\r\n  // Обновление короткометражек\r\n  useEffect(() => {\r\n    setShortMovies(JSON.parse(localStorage.getItem(\"durationMovieShort\")));\r\n    setShortMoviesSave(\r\n      JSON.parse(localStorage.getItem(\"durationMovieShortSave\"))\r\n    );\r\n  }, []);\r\n\r\n  // Поиск фильмов\r\n  function handleEnter(search) {\r\n    const moviesFilter = movies\r\n      ? movies.filter((movie) => {\r\n          return movie.nameRU.toLowerCase().includes(search.toLowerCase());\r\n        })\r\n      : [];\r\n    localStorage.setItem(\"moviesSearch\", JSON.stringify(moviesFilter));\r\n    localStorage.setItem(\"isFiltered\", JSON.stringify(true));\r\n    localStorage.setItem(\"moviesSearchValue\", JSON.stringify(search));\r\n    setTimeout(() => {\r\n      setLoaded(false);\r\n      setFilterMovies(JSON.parse(localStorage.getItem(\"moviesSearch\")));\r\n      setIsFiltered(JSON.parse(localStorage.getItem(\"isFiltered\")));\r\n      setValueSearch(\r\n        JSON.parse(window.localStorage.getItem(\"moviesSearchValue\"))\r\n      );\r\n    }, 450);\r\n  }\r\n\r\n  // Сохранение фильма\r\n  function handleSaveMovie(movieData) {\r\n    setSaveMovies([...saveMovies, movieData]);\r\n    mainApi\r\n      .saveMovie(movieData)\r\n      .then((newMovie) => {\r\n        setSaveMovies([...saveMovies, newMovie]);\r\n        localStorage.setItem(\r\n          \"saveMovies\",\r\n          JSON.stringify([...saveMovies, newMovie])\r\n        );\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        // handleInfoTooltip({\r\n        //   union: unionFalse,\r\n        //   text: \"Ошибка сохранения фильма\",\r\n        // });\r\n      });\r\n  }\r\n\r\n  // Поиск сохраненных фильмов\r\n  function handleSearchSaveMovie(search) {\r\n    const moviesSaveFilter = saveMovies\r\n      ? saveMovies.filter((movie) => {\r\n          return movie.nameRU.toLowerCase().includes(search.toLowerCase());\r\n        })\r\n      : [];\r\n    localStorage.setItem(\"isFilteredSave\", JSON.stringify(true));\r\n    setTimeout(() => {\r\n      setLoaded(false);\r\n      setFilterSaveMovies(moviesSaveFilter);\r\n      setIsFilteredSave(JSON.parse(localStorage.getItem(\"isFilteredSave\")));\r\n    }, 450);\r\n  }\r\n\r\n  // Функция удаления из избранного\r\n  function handleDeleteSaveMovie(saveMovie) {\r\n    mainApi\r\n      .deleteMovie(saveMovie._id || saveMovie.id)\r\n      .then(() => {\r\n        const newCardsArr = saveMovies.filter((c) => c._id !== saveMovie._id);\r\n        const newSavedCardsArr = saveMovies.filter(\r\n          (c) => c._id !== saveMovie._id\r\n        );\r\n        setSaveMovies(newCardsArr);\r\n        setFilterSaveMovies(newSavedCardsArr);\r\n        // handleInfoTooltip({\r\n        //   union: unionTrue,\r\n        //   text: \"Фильм удален\",\r\n        // });\r\n        localStorage.removeItem(\"saveMovies\", JSON.stringify(newCardsArr));\r\n        localStorage.removeItem(\"saveMovies\", JSON.stringify(newSavedCardsArr));\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        // handleInfoTooltip({\r\n        //   union: unionFalse,\r\n        //   text: \"Нельзя удалить чужой фильм\",\r\n        // });\r\n      });\r\n  }\r\n\r\n  // Регистрация\r\n  function handleRegistration(name, email, password) {\r\n    auth\r\n      .register(name, email, password)\r\n      .then((res) => {\r\n        if (res) {\r\n          // handleInfoTooltip({\r\n          //   union: unionTrue,\r\n          //   text: \"Вы успешно зарегистрировались!\",\r\n          // });\r\n          handleAuthorization(email, password);\r\n          history.push(\"/movies\");\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        // handleInfoTooltip({\r\n        //   union: unionFalse,\r\n        //   text: `Пользователь с таким email ${email} уже существует`,\r\n        // });\r\n      });\r\n  }\r\n\r\n  // Авторизация\r\n  function handleAuthorization(emailLogin, passwordLogin) {\r\n    auth\r\n      .authorization(emailLogin, passwordLogin)\r\n      .then((res) => {\r\n        if (res) {\r\n          localStorage.setItem(\"token\", res.token);\r\n          localStorage.setItem(\"moviesSearch\", JSON.stringify(filterMovies));\r\n          window.localStorage.setItem(\r\n            \"moviesSearchValue\",\r\n            JSON.stringify(valueSearch)\r\n          );\r\n          setLoggedIn(true);\r\n          // handleInfoTooltip({\r\n          //   union: unionTrue,\r\n          //   text: \"Вы успешно вошли!\",\r\n          // });\r\n          history.push(\"/movies\");\r\n        }\r\n      })\r\n      .then(() => {\r\n        checkToken();\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        // handleInfoTooltip({\r\n        //   union: unionFalse,\r\n        //   text: \"Вы ввели неправильный логин или пароль\",\r\n        // });\r\n      });\r\n  }\r\n\r\n  // Обновление пользователя\r\n  function handleUpdateUser(user) {\r\n    mainApi\r\n      .editProfile(user)\r\n      .then((user) => {\r\n        setCurrentUser(user);\r\n        // handleInfoTooltip({\r\n        //   union: unionTrue,\r\n        //   text: \"Профиль обновлен \",\r\n        // });\r\n        localStorage.setItem(\"user\", JSON.stringify(user));\r\n      })\r\n      .catch((err) => {\r\n        console.log(`Внимание! ${err}`);\r\n        // handleInfoTooltip({\r\n        //   union: unionFalse,\r\n        //   text: `Пользователь с таким ${user.email} уже существует`,\r\n        // });\r\n      });\r\n  }\r\n\r\n  // Короткометражки фильмов\r\n  function checkShortFilms(e) {\r\n    setLoaded(true);\r\n    localStorage.setItem(\"checkedFilms\", JSON.stringify(!checkedFilms));\r\n    setTimeout(() => {\r\n      if (!checkedFilms) {\r\n        const durationMovieShort = movies.filter(\r\n          (movie) => movie.duration <= 40\r\n        );\r\n        const durationMovieShortSearch = filterMovies.filter(\r\n          (movie) => movie.duration <= 40\r\n        );\r\n        localStorage.setItem(\r\n          \"durationMovieShort\",\r\n          JSON.stringify(durationMovieShort)\r\n        );\r\n        localStorage.setItem(\r\n          \"durationMovieShort\",\r\n          JSON.stringify(durationMovieShortSearch)\r\n        );\r\n        setShortMovies(JSON.parse(localStorage.getItem(\"durationMovieShort\")));\r\n      } else {\r\n        setMovies(movies);\r\n      }\r\n      setLoaded(false);\r\n    }, 450);\r\n    setCheckedFilms(!checkedFilms);\r\n  }\r\n\r\n  // Короткометражки сохраненных фильмов\r\n  function checkShortFilmsSave(e) {\r\n    setLoaded(true);\r\n    localStorage.setItem(\"checkedSaveFilms\", JSON.stringify(!checkedSaveFilms));\r\n    setTimeout(() => {\r\n      if (!checkedSaveFilms) {\r\n        const durationMovieShortSave = saveMovies.filter(\r\n          (movie) => movie.duration <= 40\r\n        );\r\n\r\n        const durationMovieShortSaveSearch = saveFilterSaveMovies.filter(\r\n          (movie) => movie.duration <= 40\r\n        );\r\n\r\n        localStorage.setItem(\r\n          \"durationMovieShortSave\",\r\n          JSON.stringify(durationMovieShortSave)\r\n        );\r\n        localStorage.setItem(\r\n          \"durationMovieShortSaveSearch\",\r\n          JSON.stringify(durationMovieShortSaveSearch)\r\n        );\r\n        setShortMoviesSave(\r\n          JSON.parse(localStorage.getItem(\"durationMovieShortSave\"))\r\n        );\r\n      } else {\r\n        setSaveMovies(saveMovies);\r\n      }\r\n      setLoaded(false);\r\n    }, 450);\r\n    setCheckedSaveFilms(!checkedSaveFilms);\r\n  }\r\n\r\n  // Выход\r\n  function handleSignOut() {\r\n    setLoggedIn(false);\r\n    setCurrentUser([]);\r\n    setCheckedFilms(false);\r\n    setCheckedSaveFilms(false);\r\n    localStorage.clear();\r\n    history.push(\"/\");\r\n  }\r\n\r\n  if (!permissonCheck) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <CurrentUserContext.Provider value={currentUser}>\r\n      <div className='app'>\r\n        <Switch>\r\n          <Route exact path=\"/\" component={Main} />\r\n          <ProtectedRoute\r\n            path=\"/movies\"\r\n            component={Movies}\r\n            loggedIn={loggedIn}\r\n            handleEnter={handleEnter}\r\n            loaded={loaded}\r\n            isFiltered={isFiltered}\r\n            movies={movies}\r\n            filterMovies={filterMovies}\r\n            handleSaveMovie={handleSaveMovie}\r\n            saveMovies={saveMovies}\r\n            handleDeleteSaveMovie={(movie) => handleDeleteSaveMovie(movie)}\r\n            checkShortFilms={checkShortFilms}\r\n            onCheckedFilms={checkedFilms}\r\n            shortMovies={shortMovies}\r\n            pathMovies={pathMovies}\r\n            valueSearch={valueSearch}\r\n          />\r\n          <ProtectedRoute\r\n            path=\"/saved-movies\"\r\n            component={SavedMovies}\r\n            loggedIn={loggedIn}\r\n            loaded={loaded}\r\n            handleSearchSaveMovie={handleSearchSaveMovie}\r\n            isFilteredSave={isFilteredSave}\r\n            saveMovies={saveMovies}\r\n            handleDeleteSaveMovie={handleDeleteSaveMovie}\r\n            saveFilterSaveMovies={saveFilterSaveMovies}\r\n            checkShortFilmsSave={checkShortFilmsSave}\r\n            onCheckedSaveFilms={checkedSaveFilms}\r\n            shortMovies={shortMoviesSave}\r\n            pathMoviesSave={pathMoviesSave}\r\n          />\r\n          <ProtectedRoute\r\n            path=\"/profile\"\r\n            component={Profile}\r\n            onUpdateUser={handleUpdateUser}\r\n            handleSignOut={handleSignOut}\r\n            loggedIn={loggedIn}\r\n          />\r\n          <BlockRouteUser\r\n            path=\"/signin\"\r\n            component={Login}\r\n            handleAuthorization={handleAuthorization}\r\n            loggedIn={loggedIn}\r\n          />\r\n          <BlockRouteUser\r\n            path=\"/signup\"\r\n            component={Register}\r\n            handleRegistration={handleRegistration}\r\n            loggedIn={loggedIn}\r\n          />\r\n          <Route path=\"*\" component={Error} />\r\n        </Switch>\r\n      </div>\r\n    </CurrentUserContext.Provider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}