{"ast":null,"code":"class MainApi {\n  constructor(_ref) {\n    let {\n      address\n    } = _ref;\n    this.address = address;\n  }\n\n  _getResponseData(res) {\n    return res.ok ? res.json() : Promise.reject(new Error(`Ошибка: ${res.status}`));\n  }\n\n  getSaveMovies() {\n    return fetch(`${this.address}/movies`, {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        authorization: this.getToken()\n      }\n    }).then(this._getResponseData);\n  }\n\n  getAboutUser() {\n    return fetch(`${this.address}/users/me`, {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        authorization: this.getToken()\n      }\n    }).then(this._getResponseData);\n  }\n\n  editProfile(data) {\n    return fetch(`${this.address}/users/me`, {\n      method: \"PATCH\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        authorization: this.getToken()\n      },\n      body: JSON.stringify({\n        name: data.name,\n        email: data.email\n      })\n    }).then(this._getResponseData);\n  }\n\n  saveMovie(movieData) {\n    return fetch(`${this.address}/movies`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        authorization: this.getToken()\n      },\n      body: JSON.stringify(movieData)\n    }).then(this._getResponseData);\n  }\n\n  deleteMovie(dataId) {\n    return fetch(`${this.address}/movies/${dataId}`, {\n      method: \"DELETE\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        authorization: this.getToken()\n      }\n    }).then(this._getResponseData);\n  }\n\n  getToken() {\n    return `Bearer ${localStorage.getItem(\"token\")}`;\n  }\n\n}\n\nconst mainApi = new MainApi({\n  address: \"http://api.diploma.mikhail.nomoredomains.sbs/\"\n});\nexport default mainApi;","map":{"version":3,"names":["MainApi","constructor","address","_getResponseData","res","ok","json","Promise","reject","Error","status","getSaveMovies","fetch","method","headers","authorization","getToken","then","getAboutUser","editProfile","data","body","JSON","stringify","name","email","saveMovie","movieData","deleteMovie","dataId","localStorage","getItem","mainApi"],"sources":["C:/Users/Михаил/dev/movies-explorer-frontend/src/utils/MainApi.js"],"sourcesContent":["class MainApi {\r\n    constructor({ address }) {\r\n      this.address = address;\r\n    }\r\n  \r\n    _getResponseData(res) {\r\n      return res.ok\r\n        ? res.json()\r\n        : Promise.reject(new Error(`Ошибка: ${res.status}`));\r\n    }\r\n  \r\n    getSaveMovies() {\r\n      return fetch(`${this.address}/movies`, {\r\n        method: \"GET\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          authorization: this.getToken(),\r\n        },\r\n      }).then(this._getResponseData);\r\n    }\r\n  \r\n    getAboutUser() {\r\n      return fetch(`${this.address}/users/me`, {\r\n        method: \"GET\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          authorization: this.getToken(),\r\n        },\r\n      }).then(this._getResponseData);\r\n    }\r\n  \r\n    editProfile(data) {\r\n      return fetch(`${this.address}/users/me`, {\r\n        method: \"PATCH\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          authorization: this.getToken(),\r\n        },\r\n        body: JSON.stringify({\r\n          name: data.name,\r\n          email: data.email,\r\n        }),\r\n      }).then(this._getResponseData);\r\n    }\r\n  \r\n    saveMovie(movieData) {\r\n      return fetch(`${this.address}/movies`, {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          authorization: this.getToken(),\r\n        },\r\n        body: JSON.stringify(movieData),\r\n      }).then(this._getResponseData);\r\n    }\r\n  \r\n    deleteMovie(dataId) {\r\n      return fetch(`${this.address}/movies/${dataId}`, {\r\n        method: \"DELETE\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          authorization: this.getToken(),\r\n        },\r\n      }).then(this._getResponseData);\r\n    }\r\n    getToken() {\r\n      return `Bearer ${localStorage.getItem(\"token\")}`;\r\n    }\r\n  }\r\n  \r\n  const mainApi = new MainApi({\r\n    address: \"http://api.diploma.mikhail.nomoredomains.sbs/\",\r\n  });\r\n  \r\n  export default mainApi;"],"mappings":"AAAA,MAAMA,OAAN,CAAc;EACVC,WAAW,OAAc;IAAA,IAAb;MAAEC;IAAF,CAAa;IACvB,KAAKA,OAAL,GAAeA,OAAf;EACD;;EAEDC,gBAAgB,CAACC,GAAD,EAAM;IACpB,OAAOA,GAAG,CAACC,EAAJ,GACHD,GAAG,CAACE,IAAJ,EADG,GAEHC,OAAO,CAACC,MAAR,CAAe,IAAIC,KAAJ,CAAW,WAAUL,GAAG,CAACM,MAAO,EAAhC,CAAf,CAFJ;EAGD;;EAEDC,aAAa,GAAG;IACd,OAAOC,KAAK,CAAE,GAAE,KAAKV,OAAQ,SAAjB,EAA2B;MACrCW,MAAM,EAAE,KAD6B;MAErCC,OAAO,EAAE;QACP,gBAAgB,kBADT;QAEPC,aAAa,EAAE,KAAKC,QAAL;MAFR;IAF4B,CAA3B,CAAL,CAMJC,IANI,CAMC,KAAKd,gBANN,CAAP;EAOD;;EAEDe,YAAY,GAAG;IACb,OAAON,KAAK,CAAE,GAAE,KAAKV,OAAQ,WAAjB,EAA6B;MACvCW,MAAM,EAAE,KAD+B;MAEvCC,OAAO,EAAE;QACP,gBAAgB,kBADT;QAEPC,aAAa,EAAE,KAAKC,QAAL;MAFR;IAF8B,CAA7B,CAAL,CAMJC,IANI,CAMC,KAAKd,gBANN,CAAP;EAOD;;EAEDgB,WAAW,CAACC,IAAD,EAAO;IAChB,OAAOR,KAAK,CAAE,GAAE,KAAKV,OAAQ,WAAjB,EAA6B;MACvCW,MAAM,EAAE,OAD+B;MAEvCC,OAAO,EAAE;QACP,gBAAgB,kBADT;QAEPC,aAAa,EAAE,KAAKC,QAAL;MAFR,CAF8B;MAMvCK,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;QACnBC,IAAI,EAAEJ,IAAI,CAACI,IADQ;QAEnBC,KAAK,EAAEL,IAAI,CAACK;MAFO,CAAf;IANiC,CAA7B,CAAL,CAUJR,IAVI,CAUC,KAAKd,gBAVN,CAAP;EAWD;;EAEDuB,SAAS,CAACC,SAAD,EAAY;IACnB,OAAOf,KAAK,CAAE,GAAE,KAAKV,OAAQ,SAAjB,EAA2B;MACrCW,MAAM,EAAE,MAD6B;MAErCC,OAAO,EAAE;QACP,gBAAgB,kBADT;QAEPC,aAAa,EAAE,KAAKC,QAAL;MAFR,CAF4B;MAMrCK,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeI,SAAf;IAN+B,CAA3B,CAAL,CAOJV,IAPI,CAOC,KAAKd,gBAPN,CAAP;EAQD;;EAEDyB,WAAW,CAACC,MAAD,EAAS;IAClB,OAAOjB,KAAK,CAAE,GAAE,KAAKV,OAAQ,WAAU2B,MAAO,EAAlC,EAAqC;MAC/ChB,MAAM,EAAE,QADuC;MAE/CC,OAAO,EAAE;QACP,gBAAgB,kBADT;QAEPC,aAAa,EAAE,KAAKC,QAAL;MAFR;IAFsC,CAArC,CAAL,CAMJC,IANI,CAMC,KAAKd,gBANN,CAAP;EAOD;;EACDa,QAAQ,GAAG;IACT,OAAQ,UAASc,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA8B,EAA/C;EACD;;AAnES;;AAsEZ,MAAMC,OAAO,GAAG,IAAIhC,OAAJ,CAAY;EAC1BE,OAAO,EAAE;AADiB,CAAZ,CAAhB;AAIA,eAAe8B,OAAf"},"metadata":{},"sourceType":"module"}