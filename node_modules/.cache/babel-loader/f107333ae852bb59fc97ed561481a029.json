{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\\\u041C\\u0438\\u0445\\u0430\\u0438\\u043B\\\\dev\\\\movies-explorer-frontend\\\\src\\\\components\\\\App\\\\App.js\",\n    _s = $RefreshSig$();\n\nimport '../App/App.css';\nimport { useEffect, useState } from 'react';\nimport { Route, Switch, useLocation, useHistory } from 'react-router-dom';\nimport Main from '../Main/Main';\nimport Movies from '../Movies/Movies';\nimport SavedMovies from '../SavedMovies/SavedMovies';\nimport Register from '../Register/Register';\nimport Profile from '../Profile/Profile';\nimport Login from '../Login/Login';\nimport Error from \"../Error/Error\";\nimport { CurrentUserContext } from \"../context/CurrentUserContext\";\nimport mainApi from \"../../utils/MainApi\";\nimport * as auth from \"../../utils/auth\";\nimport ProtectedRoute from \"../ProtectedRoute/ProtectedRoute\";\nimport moviesApi from \"../../utils/MoviesApi\";\nimport InfoTooltip from \"../InfoTooltip/InfoTooltip\";\nimport unionTrue from \"../../images/union.svg\";\nimport unionFalse from \"../../images/unionerror.svg\";\nimport BlockRouteUser from \"../BlockRouteUser/BlockRouteUser\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction App() {\n  _s();\n\n  const valueData = JSON.parse(localStorage.getItem(\"moviesSearchValue\"));\n  const location = useLocation();\n  const history = useHistory();\n  const [currentUser, setCurrentUser] = useState([]);\n  const [loggedIn, setLoggedIn] = useState(false);\n  const [movies, setMovies] = useState([]);\n  const [filterMovies, setFilterMovies] = useState([]);\n  const [saveMovies, setSaveMovies] = useState([]);\n  const [saveFilterSaveMovies, setFilterSaveMovies] = useState([]);\n  const [shortMovies, setShortMovies] = useState([]);\n  const [shortMoviesSave, setShortMoviesSave] = useState([]);\n  const [isData, setData] = useState({});\n  const [valueSearch, setValueSearch] = useState(valueData);\n  const [loaded, setLoaded] = useState(true);\n  const [isFiltered, setIsFiltered] = useState(false);\n  const [isFilteredSave, setIsFilteredSave] = useState(false);\n  const [checkedFilms, setCheckedFilms] = useState(false);\n  const [checkedSaveFilms, setCheckedSaveFilms] = useState(false);\n  const [permissonCheck, setPermissonCheck] = useState(false);\n  const [isInfoTooltip, setInfoTooltip] = useState(false);\n  const pathHeadersArray = [\"/\", \"/movies\", \"/saved-movies\", \"/profile\"];\n  const pathFootersArray = [\"/\", \"/movies\", \"/saved-movies\"];\n  const pathMovies = location.pathname === \"/movies\";\n  const pathMoviesSave = location.pathname === \"/saved-movies\";\n  const pathHeaders = pathHeadersArray.includes(location.pathname);\n  const pathFooters = pathFootersArray.includes(location.pathname); // проверка токенов авторизованных пользователей, вернувшихся в приложение\n\n  function checkToken() {\n    const token = localStorage.getItem(\"token\");\n\n    if (token) {\n      auth.examinationValidationToken(token).then(res => {\n        setCurrentUser(res);\n        setLoggedIn(true);\n        localStorage.setItem(\"user\", JSON.stringify(res));\n      }).catch(err => {\n        console.log(err);\n        localStorage.removeItem(\"token\");\n        handleInfoTooltip({\n          union: unionFalse,\n          text: \"Ошибка токена\"\n        });\n      });\n    }\n  } // Загрузка данных пользователя и фильмов\n\n\n  useEffect(() => {\n    setLoaded(true);\n    setTimeout(() => {\n      if (loggedIn) {\n        Promise.all([moviesApi.getMovies(), mainApi.getAboutUser(), mainApi.getSaveMovies()]).then(_ref => {\n          let [movies, user, saveMovies] = _ref;\n          localStorage.setItem(\"user\", JSON.stringify(user));\n          setCurrentUser(JSON.parse(localStorage.getItem(\"user\")));\n          const userSaveMovie = saveMovies.filter(movie => movie.owner === user._id);\n          localStorage.setItem(\"saveMovies\", JSON.stringify(userSaveMovie));\n          localStorage.setItem(\"movies\", JSON.stringify(movies));\n          setSaveMovies(JSON.parse(localStorage.getItem(\"saveMovies\")));\n          setMovies(JSON.parse(localStorage.getItem(\"movies\")));\n          setLoaded(false);\n        }).catch(err => {\n          console.log(err);\n          handleInfoTooltip({\n            union: unionFalse,\n            text: \"Ошибка обновления данных\"\n          });\n        });\n      }\n    }, 1000);\n  }, [loggedIn]);\n  useEffect(() => {\n    const token = localStorage.getItem(\"token\");\n\n    if (!token) {\n      setPermissonCheck(true);\n      return;\n    }\n\n    checkToken();\n    setPermissonCheck(true);\n    setLoggedIn(true);\n    setCheckedFilms(JSON.parse(localStorage.getItem(\"checkedFilms\")));\n    setCheckedSaveFilms(JSON.parse(localStorage.getItem(\"checkedSaveFilms\")));\n  }, []);\n  useEffect(() => {\n    setFilterMovies(JSON.parse(localStorage.getItem(\"moviesSearch\")));\n    setIsFiltered(JSON.parse(localStorage.getItem(\"isFiltered\")));\n  }, []); // Обновление короткометражек\n\n  useEffect(() => {\n    setShortMovies(JSON.parse(localStorage.getItem(\"durationMovieShort\")));\n    setShortMoviesSave(JSON.parse(localStorage.getItem(\"durationMovieShortSave\")));\n  }, []); // Закрытие попапа уведомления\n\n  function closeAllPopups() {\n    setInfoTooltip(false);\n  } // Открытие попапа уведомления и данные попапа\n\n\n  function handleInfoTooltip(data) {\n    setInfoTooltip(true);\n    setData({ ...data\n    });\n  } // Поиск фильмов\n\n\n  function handleEnter(search) {\n    const moviesFilter = movies ? movies.filter(movie => {\n      return movie.nameRU.toLowerCase().includes(search.toLowerCase());\n    }) : [];\n    localStorage.setItem(\"moviesSearch\", JSON.stringify(moviesFilter));\n    localStorage.setItem(\"isFiltered\", JSON.stringify(true));\n    localStorage.setItem(\"moviesSearchValue\", JSON.stringify(search));\n    setTimeout(() => {\n      setLoaded(false);\n      setFilterMovies(JSON.parse(localStorage.getItem(\"moviesSearch\")));\n      setIsFiltered(JSON.parse(localStorage.getItem(\"isFiltered\")));\n      setValueSearch(JSON.parse(window.localStorage.getItem(\"moviesSearchValue\")));\n    }, 450);\n  } // Сохранение фильма\n\n\n  function handleSaveMovie(movieData) {\n    setSaveMovies([...saveMovies, movieData]);\n    mainApi.saveMovie(movieData).then(newMovie => {\n      setSaveMovies([...saveMovies, newMovie]);\n      localStorage.setItem(\"saveMovies\", JSON.stringify([...saveMovies, newMovie]));\n    }).catch(err => {\n      console.log(err);\n      handleInfoTooltip({\n        union: unionFalse,\n        text: \"Ошибка сохранения фильма\"\n      });\n    });\n  } // Поиск сохраненных фильмов\n\n\n  function handleSearchSaveMovie(search) {\n    const moviesSaveFilter = saveMovies ? saveMovies.filter(movie => {\n      return movie.nameRU.toLowerCase().includes(search.toLowerCase());\n    }) : [];\n    localStorage.setItem(\"isFilteredSave\", JSON.stringify(true));\n    setTimeout(() => {\n      setLoaded(false);\n      setFilterSaveMovies(moviesSaveFilter);\n      setIsFilteredSave(JSON.parse(localStorage.getItem(\"isFilteredSave\")));\n    }, 450);\n  } // Функция удаления из избранного\n\n\n  function handleDeleteSaveMovie(saveMovie) {\n    mainApi.deleteMovie(saveMovie._id || saveMovie.id).then(() => {\n      const newCardsArr = saveMovies.filter(c => c._id !== saveMovie._id);\n      const newSavedCardsArr = saveMovies.filter(c => c._id !== saveMovie._id);\n      setSaveMovies(newCardsArr);\n      setFilterSaveMovies(newSavedCardsArr);\n      handleInfoTooltip({\n        union: unionTrue,\n        text: \"Фильм удален\"\n      });\n      localStorage.removeItem(\"saveMovies\", JSON.stringify(newCardsArr));\n      localStorage.removeItem(\"saveMovies\", JSON.stringify(newSavedCardsArr));\n    }).catch(err => {\n      console.log(err);\n      handleInfoTooltip({\n        union: unionFalse,\n        text: \"Нельзя удалить чужой фильм\"\n      });\n    });\n  } // Регистрация\n\n\n  function handleRegistration(name, email, password) {\n    auth.register(name, email, password).then(res => {\n      if (res) {\n        handleInfoTooltip({\n          union: unionTrue,\n          text: \"Вы успешно зарегистрировались!\"\n        });\n        handleAuthorization(email, password);\n        history.push(\"/movies\");\n      }\n    }).catch(err => {\n      console.log(err);\n      handleInfoTooltip({\n        union: unionFalse,\n        text: `Пользователь с таким email ${email} уже существует`\n      });\n    });\n  } // Авторизация\n\n\n  function handleAuthorization(emailLogin, passwordLogin) {\n    auth.authorization(emailLogin, passwordLogin).then(res => {\n      if (res) {\n        localStorage.setItem(\"token\", res.token);\n        localStorage.setItem(\"moviesSearch\", JSON.stringify(filterMovies));\n        window.localStorage.setItem(\"moviesSearchValue\", JSON.stringify(valueSearch));\n        setLoggedIn(true);\n        handleInfoTooltip({\n          union: unionTrue,\n          text: \"Вы успешно вошли!\"\n        });\n        history.push(\"/movies\");\n      }\n    }).then(() => {\n      checkToken();\n    }).catch(err => {\n      console.log(err);\n      handleInfoTooltip({\n        union: unionFalse,\n        text: \"Вы ввели неправильный логин или пароль\"\n      });\n    });\n  } // Обновление пользователя\n\n\n  function handleUpdateUser(user) {\n    mainApi.editProfile(user).then(user => {\n      setCurrentUser(user);\n      handleInfoTooltip({\n        union: unionTrue,\n        text: \"Профиль обновлен \"\n      });\n      localStorage.setItem(\"user\", JSON.stringify(user));\n    }).catch(err => {\n      console.log(`Внимание! ${err}`);\n      handleInfoTooltip({\n        union: unionFalse,\n        text: `Пользователь с таким ${user.email} уже существует`\n      });\n    });\n  } // Короткометражки фильмов\n\n\n  function checkShortFilms(e) {\n    setLoaded(true);\n    localStorage.setItem(\"checkedFilms\", JSON.stringify(!checkedFilms));\n    setTimeout(() => {\n      if (!checkedFilms) {\n        const durationMovieShort = movies.filter(movie => movie.duration <= 40);\n        const durationMovieShortSearch = filterMovies.filter(movie => movie.duration <= 40);\n        localStorage.setItem(\"durationMovieShort\", JSON.stringify(durationMovieShort));\n        localStorage.setItem(\"durationMovieShort\", JSON.stringify(durationMovieShortSearch));\n        setShortMovies(JSON.parse(localStorage.getItem(\"durationMovieShort\")));\n      } else {\n        setMovies(movies);\n      }\n\n      setLoaded(false);\n    }, 450);\n    setCheckedFilms(!checkedFilms);\n  } // Короткометражки сохраненных фильмов\n\n\n  function checkShortFilmsSave(e) {\n    setLoaded(true);\n    localStorage.setItem(\"checkedSaveFilms\", JSON.stringify(!checkedSaveFilms));\n    setTimeout(() => {\n      if (!checkedSaveFilms) {\n        const durationMovieShortSave = saveMovies.filter(movie => movie.duration <= 40);\n        const durationMovieShortSaveSearch = saveFilterSaveMovies.filter(movie => movie.duration <= 40);\n        localStorage.setItem(\"durationMovieShortSave\", JSON.stringify(durationMovieShortSave));\n        localStorage.setItem(\"durationMovieShortSaveSearch\", JSON.stringify(durationMovieShortSaveSearch));\n        setShortMoviesSave(JSON.parse(localStorage.getItem(\"durationMovieShortSave\")));\n      } else {\n        setSaveMovies(saveMovies);\n      }\n\n      setLoaded(false);\n    }, 450);\n    setCheckedSaveFilms(!checkedSaveFilms);\n  } // Выход\n\n\n  function handleSignOut() {\n    setLoggedIn(false);\n    setCurrentUser([]);\n    setCheckedFilms(false);\n    setCheckedSaveFilms(false);\n    localStorage.clear();\n    history.push(\"/\");\n  }\n\n  if (!permissonCheck) {\n    return null;\n  }\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(CurrentUserContext.Provider, {\n      value: currentUser,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"app\",\n        children: /*#__PURE__*/_jsxDEV(Switch, {\n          children: [/*#__PURE__*/_jsxDEV(Route, {\n            exact: true,\n            path: \"/\",\n            component: Main\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 385,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(ProtectedRoute, {\n            path: \"/movies\",\n            component: Movies,\n            loggedIn: loggedIn,\n            handleEnter: handleEnter,\n            loaded: loaded,\n            isFiltered: isFiltered,\n            movies: movies,\n            filterMovies: filterMovies,\n            handleSaveMovie: handleSaveMovie,\n            saveMovies: saveMovies,\n            handleDeleteSaveMovie: movie => handleDeleteSaveMovie(movie),\n            checkShortFilms: checkShortFilms,\n            onCheckedFilms: checkedFilms,\n            shortMovies: shortMovies,\n            pathMovies: pathMovies,\n            valueSearch: valueSearch\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 386,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(ProtectedRoute, {\n            path: \"/saved-movies\",\n            component: SavedMovies,\n            loggedIn: loggedIn,\n            loaded: loaded,\n            handleSearchSaveMovie: handleSearchSaveMovie,\n            isFilteredSave: isFilteredSave,\n            saveMovies: saveMovies,\n            handleDeleteSaveMovie: handleDeleteSaveMovie,\n            saveFilterSaveMovies: saveFilterSaveMovies,\n            checkShortFilmsSave: checkShortFilmsSave,\n            onCheckedSaveFilms: checkedSaveFilms,\n            shortMovies: shortMoviesSave,\n            pathMoviesSave: pathMoviesSave\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 404,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(ProtectedRoute, {\n            path: \"/profile\",\n            component: Profile,\n            onUpdateUser: handleUpdateUser,\n            handleSignOut: handleSignOut,\n            loggedIn: loggedIn\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 419,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(BlockRouteUser, {\n            path: \"/signin\",\n            component: Login,\n            handleAuthorization: handleAuthorization,\n            loggedIn: loggedIn\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 426,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(BlockRouteUser, {\n            path: \"/signup\",\n            component: Register,\n            handleRegistration: handleRegistration,\n            loggedIn: loggedIn\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 432,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"*\",\n            component: Error\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 438,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 384,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 383,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 382,\n      columnNumber: 5\n    }, this)\n  }, void 0, false); // return (\n  //   <div className='app'>\n  //     <Switch>\n  //       <Route exact path=\"/\">\n  //           <Main />\n  //       </Route>\n  //       <Route exact path=\"/movies\">\n  //           <Movies \n  //             movies={movies}\n  //           />\n  //       </Route>\n  //       <Route exact path=\"/saved-movies\">\n  //           <SavedMovies />\n  //       </Route>\n  //       <Route exact path=\"/profile\">\n  //           <Profile />\n  //       </Route>\n  //       <Route exact path=\"/signup\">\n  //           <Register />\n  //       </Route>\n  //       <Route exact path=\"/signin\">\n  //           <Login />\n  //       </Route>\n  //     </Switch>\n  //   </div>\n  // );\n}\n\n_s(App, \"KSRQVoNy5qYjatgJUY/8xyDKnxQ=\", false, function () {\n  return [useLocation, useHistory];\n});\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["useEffect","useState","Route","Switch","useLocation","useHistory","Main","Movies","SavedMovies","Register","Profile","Login","Error","CurrentUserContext","mainApi","auth","ProtectedRoute","moviesApi","InfoTooltip","unionTrue","unionFalse","BlockRouteUser","App","valueData","JSON","parse","localStorage","getItem","location","history","currentUser","setCurrentUser","loggedIn","setLoggedIn","movies","setMovies","filterMovies","setFilterMovies","saveMovies","setSaveMovies","saveFilterSaveMovies","setFilterSaveMovies","shortMovies","setShortMovies","shortMoviesSave","setShortMoviesSave","isData","setData","valueSearch","setValueSearch","loaded","setLoaded","isFiltered","setIsFiltered","isFilteredSave","setIsFilteredSave","checkedFilms","setCheckedFilms","checkedSaveFilms","setCheckedSaveFilms","permissonCheck","setPermissonCheck","isInfoTooltip","setInfoTooltip","pathHeadersArray","pathFootersArray","pathMovies","pathname","pathMoviesSave","pathHeaders","includes","pathFooters","checkToken","token","examinationValidationToken","then","res","setItem","stringify","catch","err","console","log","removeItem","handleInfoTooltip","union","text","setTimeout","Promise","all","getMovies","getAboutUser","getSaveMovies","user","userSaveMovie","filter","movie","owner","_id","closeAllPopups","data","handleEnter","search","moviesFilter","nameRU","toLowerCase","window","handleSaveMovie","movieData","saveMovie","newMovie","handleSearchSaveMovie","moviesSaveFilter","handleDeleteSaveMovie","deleteMovie","id","newCardsArr","c","newSavedCardsArr","handleRegistration","name","email","password","register","handleAuthorization","push","emailLogin","passwordLogin","authorization","handleUpdateUser","editProfile","checkShortFilms","e","durationMovieShort","duration","durationMovieShortSearch","checkShortFilmsSave","durationMovieShortSave","durationMovieShortSaveSearch","handleSignOut","clear"],"sources":["C:/Users/Михаил/dev/movies-explorer-frontend/src/components/App/App.js"],"sourcesContent":["import '../App/App.css';\r\nimport { useEffect, useState } from 'react';\r\nimport { Route, Switch, useLocation, useHistory } from 'react-router-dom';\r\n\r\nimport Main from '../Main/Main';\r\nimport Movies from '../Movies/Movies';\r\nimport SavedMovies from '../SavedMovies/SavedMovies';\r\nimport Register from '../Register/Register';\r\nimport Profile from '../Profile/Profile';\r\nimport Login from '../Login/Login';\r\nimport Error from \"../Error/Error\";\r\n\r\nimport { CurrentUserContext } from \"../context/CurrentUserContext\";\r\nimport mainApi from \"../../utils/MainApi\";\r\nimport * as auth from \"../../utils/auth\";\r\nimport ProtectedRoute from \"../ProtectedRoute/ProtectedRoute\";\r\nimport moviesApi from \"../../utils/MoviesApi\";\r\n\r\nimport InfoTooltip from \"../InfoTooltip/InfoTooltip\";\r\nimport unionTrue from \"../../images/union.svg\";\r\nimport unionFalse from \"../../images/unionerror.svg\";\r\nimport BlockRouteUser from \"../BlockRouteUser/BlockRouteUser\";\r\n\r\nfunction App() {\r\n\r\n  const valueData = JSON.parse(localStorage.getItem(\"moviesSearchValue\"));\r\n  const location = useLocation();\r\n  const history = useHistory();\r\n  const [currentUser, setCurrentUser] = useState([]);\r\n  const [loggedIn, setLoggedIn] = useState(false);\r\n  const [movies, setMovies] = useState([]);\r\n  const [filterMovies, setFilterMovies] = useState([]);\r\n  const [saveMovies, setSaveMovies] = useState([]);\r\n  const [saveFilterSaveMovies, setFilterSaveMovies] = useState([]);\r\n  const [shortMovies, setShortMovies] = useState([]);\r\n  const [shortMoviesSave, setShortMoviesSave] = useState([]);\r\n  const [isData, setData] = useState({});\r\n  const [valueSearch, setValueSearch] = useState(valueData);\r\n  const [loaded, setLoaded] = useState(true);\r\n  const [isFiltered, setIsFiltered] = useState(false);\r\n  const [isFilteredSave, setIsFilteredSave] = useState(false);\r\n  const [checkedFilms, setCheckedFilms] = useState(false);\r\n  const [checkedSaveFilms, setCheckedSaveFilms] = useState(false);\r\n  const [permissonCheck, setPermissonCheck] = useState(false);\r\n  const [isInfoTooltip, setInfoTooltip] = useState(false);\r\n  const pathHeadersArray = [\"/\", \"/movies\", \"/saved-movies\", \"/profile\"];\r\n  const pathFootersArray = [\"/\", \"/movies\", \"/saved-movies\"];\r\n  const pathMovies = location.pathname === \"/movies\";\r\n  const pathMoviesSave = location.pathname === \"/saved-movies\";\r\n  const pathHeaders = pathHeadersArray.includes(location.pathname);\r\n  const pathFooters = pathFootersArray.includes(location.pathname);\r\n\r\n  // проверка токенов авторизованных пользователей, вернувшихся в приложение\r\n  function checkToken() {\r\n    const token = localStorage.getItem(\"token\");\r\n    if (token) {\r\n      auth\r\n        .examinationValidationToken(token)\r\n        .then((res) => {\r\n          setCurrentUser(res);\r\n          setLoggedIn(true);\r\n          localStorage.setItem(\"user\", JSON.stringify(res));\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n          localStorage.removeItem(\"token\");\r\n          handleInfoTooltip({\r\n            union: unionFalse,\r\n            text: \"Ошибка токена\",\r\n          });\r\n        });\r\n    }\r\n  }\r\n\r\n  // Загрузка данных пользователя и фильмов\r\n  useEffect(() => {\r\n    setLoaded(true);\r\n    setTimeout(() => {\r\n      if (loggedIn) {\r\n        Promise.all([\r\n          moviesApi.getMovies(),\r\n          mainApi.getAboutUser(),\r\n          mainApi.getSaveMovies(),\r\n        ])\r\n          .then(([movies, user, saveMovies]) => {\r\n            localStorage.setItem(\"user\", JSON.stringify(user));\r\n            setCurrentUser(JSON.parse(localStorage.getItem(\"user\")));\r\n            const userSaveMovie = saveMovies.filter(\r\n              (movie) => movie.owner === user._id\r\n            );\r\n            localStorage.setItem(\"saveMovies\", JSON.stringify(userSaveMovie));\r\n            localStorage.setItem(\"movies\", JSON.stringify(movies));\r\n            setSaveMovies(JSON.parse(localStorage.getItem(\"saveMovies\")));\r\n            setMovies(JSON.parse(localStorage.getItem(\"movies\")));\r\n            setLoaded(false);\r\n          })\r\n          .catch((err) => {\r\n            console.log(err);\r\n            handleInfoTooltip({\r\n              union: unionFalse,\r\n              text: \"Ошибка обновления данных\",\r\n            });\r\n          });\r\n      }\r\n    }, 1000);\r\n  }, [loggedIn]);\r\n\r\n  useEffect(() => {\r\n    const token = localStorage.getItem(\"token\");\r\n    if (!token) {\r\n      setPermissonCheck(true);\r\n      return;\r\n    }\r\n    checkToken();\r\n    setPermissonCheck(true);\r\n    setLoggedIn(true);\r\n    setCheckedFilms(JSON.parse(localStorage.getItem(\"checkedFilms\")));\r\n    setCheckedSaveFilms(JSON.parse(localStorage.getItem(\"checkedSaveFilms\")));\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    setFilterMovies(JSON.parse(localStorage.getItem(\"moviesSearch\")));\r\n    setIsFiltered(JSON.parse(localStorage.getItem(\"isFiltered\")));\r\n  }, []);\r\n\r\n  // Обновление короткометражек\r\n  useEffect(() => {\r\n    setShortMovies(JSON.parse(localStorage.getItem(\"durationMovieShort\")));\r\n    setShortMoviesSave(\r\n      JSON.parse(localStorage.getItem(\"durationMovieShortSave\"))\r\n    );\r\n  }, []);\r\n\r\n  // Закрытие попапа уведомления\r\n  function closeAllPopups() {\r\n    setInfoTooltip(false);\r\n  }\r\n\r\n  // Открытие попапа уведомления и данные попапа\r\n  function handleInfoTooltip(data) {\r\n    setInfoTooltip(true);\r\n    setData({ ...data });\r\n  }\r\n\r\n  // Поиск фильмов\r\n  function handleEnter(search) {\r\n    const moviesFilter = movies\r\n      ? movies.filter((movie) => {\r\n          return movie.nameRU.toLowerCase().includes(search.toLowerCase());\r\n        })\r\n      : [];\r\n    localStorage.setItem(\"moviesSearch\", JSON.stringify(moviesFilter));\r\n    localStorage.setItem(\"isFiltered\", JSON.stringify(true));\r\n    localStorage.setItem(\"moviesSearchValue\", JSON.stringify(search));\r\n    setTimeout(() => {\r\n      setLoaded(false);\r\n      setFilterMovies(JSON.parse(localStorage.getItem(\"moviesSearch\")));\r\n      setIsFiltered(JSON.parse(localStorage.getItem(\"isFiltered\")));\r\n      setValueSearch(\r\n        JSON.parse(window.localStorage.getItem(\"moviesSearchValue\"))\r\n      );\r\n    }, 450);\r\n  }\r\n\r\n  // Сохранение фильма\r\n  function handleSaveMovie(movieData) {\r\n    setSaveMovies([...saveMovies, movieData]);\r\n    mainApi\r\n      .saveMovie(movieData)\r\n      .then((newMovie) => {\r\n        setSaveMovies([...saveMovies, newMovie]);\r\n        localStorage.setItem(\r\n          \"saveMovies\",\r\n          JSON.stringify([...saveMovies, newMovie])\r\n        );\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        handleInfoTooltip({\r\n          union: unionFalse,\r\n          text: \"Ошибка сохранения фильма\",\r\n        });\r\n      });\r\n  }\r\n\r\n  // Поиск сохраненных фильмов\r\n  function handleSearchSaveMovie(search) {\r\n    const moviesSaveFilter = saveMovies\r\n      ? saveMovies.filter((movie) => {\r\n          return movie.nameRU.toLowerCase().includes(search.toLowerCase());\r\n        })\r\n      : [];\r\n    localStorage.setItem(\"isFilteredSave\", JSON.stringify(true));\r\n    setTimeout(() => {\r\n      setLoaded(false);\r\n      setFilterSaveMovies(moviesSaveFilter);\r\n      setIsFilteredSave(JSON.parse(localStorage.getItem(\"isFilteredSave\")));\r\n    }, 450);\r\n  }\r\n\r\n  // Функция удаления из избранного\r\n  function handleDeleteSaveMovie(saveMovie) {\r\n    mainApi\r\n      .deleteMovie(saveMovie._id || saveMovie.id)\r\n      .then(() => {\r\n        const newCardsArr = saveMovies.filter((c) => c._id !== saveMovie._id);\r\n        const newSavedCardsArr = saveMovies.filter(\r\n          (c) => c._id !== saveMovie._id\r\n        );\r\n        setSaveMovies(newCardsArr);\r\n        setFilterSaveMovies(newSavedCardsArr);\r\n        handleInfoTooltip({\r\n          union: unionTrue,\r\n          text: \"Фильм удален\",\r\n        });\r\n        localStorage.removeItem(\"saveMovies\", JSON.stringify(newCardsArr));\r\n        localStorage.removeItem(\"saveMovies\", JSON.stringify(newSavedCardsArr));\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        handleInfoTooltip({\r\n          union: unionFalse,\r\n          text: \"Нельзя удалить чужой фильм\",\r\n        });\r\n      });\r\n  }\r\n\r\n  // Регистрация\r\n  function handleRegistration(name, email, password) {\r\n    auth\r\n      .register(name, email, password)\r\n      .then((res) => {\r\n        if (res) {\r\n          handleInfoTooltip({\r\n            union: unionTrue,\r\n            text: \"Вы успешно зарегистрировались!\",\r\n          });\r\n          handleAuthorization(email, password);\r\n          history.push(\"/movies\");\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        handleInfoTooltip({\r\n          union: unionFalse,\r\n          text: `Пользователь с таким email ${email} уже существует`,\r\n        });\r\n      });\r\n  }\r\n\r\n  // Авторизация\r\n  function handleAuthorization(emailLogin, passwordLogin) {\r\n    auth\r\n      .authorization(emailLogin, passwordLogin)\r\n      .then((res) => {\r\n        if (res) {\r\n          localStorage.setItem(\"token\", res.token);\r\n          localStorage.setItem(\"moviesSearch\", JSON.stringify(filterMovies));\r\n          window.localStorage.setItem(\r\n            \"moviesSearchValue\",\r\n            JSON.stringify(valueSearch)\r\n          );\r\n          setLoggedIn(true);\r\n          handleInfoTooltip({\r\n            union: unionTrue,\r\n            text: \"Вы успешно вошли!\",\r\n          });\r\n          history.push(\"/movies\");\r\n        }\r\n      })\r\n      .then(() => {\r\n        checkToken();\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        handleInfoTooltip({\r\n          union: unionFalse,\r\n          text: \"Вы ввели неправильный логин или пароль\",\r\n        });\r\n      });\r\n  }\r\n\r\n  // Обновление пользователя\r\n  function handleUpdateUser(user) {\r\n    mainApi\r\n      .editProfile(user)\r\n      .then((user) => {\r\n        setCurrentUser(user);\r\n        handleInfoTooltip({\r\n          union: unionTrue,\r\n          text: \"Профиль обновлен \",\r\n        });\r\n        localStorage.setItem(\"user\", JSON.stringify(user));\r\n      })\r\n      .catch((err) => {\r\n        console.log(`Внимание! ${err}`);\r\n        handleInfoTooltip({\r\n          union: unionFalse,\r\n          text: `Пользователь с таким ${user.email} уже существует`,\r\n        });\r\n      });\r\n  }\r\n\r\n  // Короткометражки фильмов\r\n  function checkShortFilms(e) {\r\n    setLoaded(true);\r\n    localStorage.setItem(\"checkedFilms\", JSON.stringify(!checkedFilms));\r\n    setTimeout(() => {\r\n      if (!checkedFilms) {\r\n        const durationMovieShort = movies.filter(\r\n          (movie) => movie.duration <= 40\r\n        );\r\n        const durationMovieShortSearch = filterMovies.filter(\r\n          (movie) => movie.duration <= 40\r\n        );\r\n        localStorage.setItem(\r\n          \"durationMovieShort\",\r\n          JSON.stringify(durationMovieShort)\r\n        );\r\n        localStorage.setItem(\r\n          \"durationMovieShort\",\r\n          JSON.stringify(durationMovieShortSearch)\r\n        );\r\n        setShortMovies(JSON.parse(localStorage.getItem(\"durationMovieShort\")));\r\n      } else {\r\n        setMovies(movies);\r\n      }\r\n      setLoaded(false);\r\n    }, 450);\r\n    setCheckedFilms(!checkedFilms);\r\n  }\r\n\r\n  // Короткометражки сохраненных фильмов\r\n  function checkShortFilmsSave(e) {\r\n    setLoaded(true);\r\n    localStorage.setItem(\"checkedSaveFilms\", JSON.stringify(!checkedSaveFilms));\r\n    setTimeout(() => {\r\n      if (!checkedSaveFilms) {\r\n        const durationMovieShortSave = saveMovies.filter(\r\n          (movie) => movie.duration <= 40\r\n        );\r\n\r\n        const durationMovieShortSaveSearch = saveFilterSaveMovies.filter(\r\n          (movie) => movie.duration <= 40\r\n        );\r\n\r\n        localStorage.setItem(\r\n          \"durationMovieShortSave\",\r\n          JSON.stringify(durationMovieShortSave)\r\n        );\r\n        localStorage.setItem(\r\n          \"durationMovieShortSaveSearch\",\r\n          JSON.stringify(durationMovieShortSaveSearch)\r\n        );\r\n        setShortMoviesSave(\r\n          JSON.parse(localStorage.getItem(\"durationMovieShortSave\"))\r\n        );\r\n      } else {\r\n        setSaveMovies(saveMovies);\r\n      }\r\n      setLoaded(false);\r\n    }, 450);\r\n    setCheckedSaveFilms(!checkedSaveFilms);\r\n  }\r\n\r\n  // Выход\r\n  function handleSignOut() {\r\n    setLoggedIn(false);\r\n    setCurrentUser([]);\r\n    setCheckedFilms(false);\r\n    setCheckedSaveFilms(false);\r\n    localStorage.clear();\r\n    history.push(\"/\");\r\n  }\r\n\r\n  if (!permissonCheck) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <>\r\n    <CurrentUserContext.Provider value={currentUser}>\r\n      <div className='app'>\r\n        <Switch>\r\n          <Route exact path=\"/\" component={Main} />\r\n          <ProtectedRoute\r\n            path=\"/movies\"\r\n            component={Movies}\r\n            loggedIn={loggedIn}\r\n            handleEnter={handleEnter}\r\n            loaded={loaded}\r\n            isFiltered={isFiltered}\r\n            movies={movies}\r\n            filterMovies={filterMovies}\r\n            handleSaveMovie={handleSaveMovie}\r\n            saveMovies={saveMovies}\r\n            handleDeleteSaveMovie={(movie) => handleDeleteSaveMovie(movie)}\r\n            checkShortFilms={checkShortFilms}\r\n            onCheckedFilms={checkedFilms}\r\n            shortMovies={shortMovies}\r\n            pathMovies={pathMovies}\r\n            valueSearch={valueSearch}\r\n          />\r\n          <ProtectedRoute\r\n            path=\"/saved-movies\"\r\n            component={SavedMovies}\r\n            loggedIn={loggedIn}\r\n            loaded={loaded}\r\n            handleSearchSaveMovie={handleSearchSaveMovie}\r\n            isFilteredSave={isFilteredSave}\r\n            saveMovies={saveMovies}\r\n            handleDeleteSaveMovie={handleDeleteSaveMovie}\r\n            saveFilterSaveMovies={saveFilterSaveMovies}\r\n            checkShortFilmsSave={checkShortFilmsSave}\r\n            onCheckedSaveFilms={checkedSaveFilms}\r\n            shortMovies={shortMoviesSave}\r\n            pathMoviesSave={pathMoviesSave}\r\n          />\r\n          <ProtectedRoute\r\n            path=\"/profile\"\r\n            component={Profile}\r\n            onUpdateUser={handleUpdateUser}\r\n            handleSignOut={handleSignOut}\r\n            loggedIn={loggedIn}\r\n          />\r\n          <BlockRouteUser\r\n            path=\"/signin\"\r\n            component={Login}\r\n            handleAuthorization={handleAuthorization}\r\n            loggedIn={loggedIn}\r\n          />\r\n          <BlockRouteUser\r\n            path=\"/signup\"\r\n            component={Register}\r\n            handleRegistration={handleRegistration}\r\n            loggedIn={loggedIn}\r\n          />\r\n          <Route path=\"*\" component={Error} />\r\n        </Switch>\r\n        {/* <InfoTooltip\r\n          isOpen={isInfoTooltip}\r\n          onClose={closeAllPopups}\r\n          loggedIn={loggedIn}\r\n          union={isData}\r\n        /> */}\r\n      </div>\r\n    </CurrentUserContext.Provider>\r\n    </>\r\n  );\r\n\r\n  // return (\r\n  //   <div className='app'>\r\n  //     <Switch>\r\n  //       <Route exact path=\"/\">\r\n  //           <Main />\r\n  //       </Route>\r\n  //       <Route exact path=\"/movies\">\r\n  //           <Movies \r\n  //             movies={movies}\r\n  //           />\r\n  //       </Route>\r\n  //       <Route exact path=\"/saved-movies\">\r\n  //           <SavedMovies />\r\n  //       </Route>\r\n  //       <Route exact path=\"/profile\">\r\n  //           <Profile />\r\n  //       </Route>\r\n  //       <Route exact path=\"/signup\">\r\n  //           <Register />\r\n  //       </Route>\r\n  //       <Route exact path=\"/signin\">\r\n  //           <Login />\r\n  //       </Route>\r\n  //     </Switch>\r\n  //   </div>\r\n  // );\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}