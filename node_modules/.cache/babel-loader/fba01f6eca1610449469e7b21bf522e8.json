{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\\\u041C\\u0438\\u0445\\u0430\\u0438\\u043B\\\\dev\\\\movies-explorer-frontend\\\\src\\\\components\\\\App\\\\App.js\",\n    _s = $RefreshSig$();\n\nimport '../App/App.css';\nimport { useEffect, useState } from 'react';\nimport { Route, Switch, useLocation, useHistory } from 'react-router-dom';\nimport Main from '../Main/Main';\nimport Movies from '../Movies/Movies';\nimport SavedMovies from '../SavedMovies/SavedMovies';\nimport Register from '../Register/Register';\nimport Profile from '../Profile/Profile';\nimport Login from '../Login/Login';\nimport Error from \"../Error/Error\";\nimport { CurrentUserContext } from \"../context/CurrentUserContext\";\nimport mainApi from \"../../utils/MainApi\";\nimport * as auth from \"../../utils/auth\";\nimport ProtectedRoute from \"../ProtectedRoute/ProtectedRoute\";\nimport moviesApi from \"../../utils/MoviesApi\";\nimport unionTrue from \"../../images/union.svg\";\nimport unionFalse from \"../../images/unionerror.svg\";\nimport BlockRouteUser from \"../BlockRouteUser/BlockRouteUser\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction App() {\n  _s();\n\n  const valueData = JSON.parse(localStorage.getItem(\"moviesSearchValue\"));\n  const location = useLocation();\n  const history = useHistory();\n  const [currentUser, setCurrentUser] = useState([]);\n  const [loggedIn, setLoggedIn] = useState(false);\n  const [movies, setMovies] = useState([]);\n  const [filterMovies, setFilterMovies] = useState([]);\n  const [saveMovies, setSaveMovies] = useState([]);\n  const [saveFilterSaveMovies, setFilterSaveMovies] = useState([]);\n  const [shortMovies, setShortMovies] = useState([]);\n  const [shortMoviesSave, setShortMoviesSave] = useState([]);\n  const [isData, setData] = useState({});\n  const [valueSearch, setValueSearch] = useState(valueData);\n  const [loaded, setLoaded] = useState(true);\n  const [isFiltered, setIsFiltered] = useState(false);\n  const [isFilteredSave, setIsFilteredSave] = useState(false);\n  const [checkedFilms, setCheckedFilms] = useState(false);\n  const [checkedSaveFilms, setCheckedSaveFilms] = useState(false);\n  const [permissonCheck, setPermissonCheck] = useState(false);\n  const pathHeadersArray = [\"/\", \"/movies\", \"/saved-movies\", \"/profile\"];\n  const pathFootersArray = [\"/\", \"/movies\", \"/saved-movies\"];\n  const pathMovies = location.pathname === \"/movies\";\n  const pathMoviesSave = location.pathname === \"/saved-movies\"; // проверка токенов авторизованных пользователей, вернувшихся в приложение\n\n  function checkToken() {\n    const token = localStorage.getItem(\"token\");\n\n    if (token) {\n      auth.examinationValidationToken(token).then(res => {\n        setCurrentUser(res);\n        setLoggedIn(true);\n        localStorage.setItem(\"user\", JSON.stringify(res));\n      }).catch(err => {\n        console.log(err);\n        localStorage.removeItem(\"token\");\n        handleInfoTooltip({\n          union: unionFalse,\n          text: \"Ошибка токена\"\n        });\n      });\n    }\n  } // Загрузка данных пользователя и фильмов\n\n\n  useEffect(() => {\n    setLoaded(true);\n    setTimeout(() => {\n      if (loggedIn) {\n        Promise.all([moviesApi.getMovies(), mainApi.getAboutUser(), mainApi.getSaveMovies()]).then(_ref => {\n          let [movies, user, saveMovies] = _ref;\n          localStorage.setItem(\"user\", JSON.stringify(user));\n          setCurrentUser(JSON.parse(localStorage.getItem(\"user\")));\n          const userSaveMovie = saveMovies.filter(movie => movie.owner === user._id);\n          localStorage.setItem(\"saveMovies\", JSON.stringify(userSaveMovie));\n          localStorage.setItem(\"movies\", JSON.stringify(movies));\n          setSaveMovies(JSON.parse(localStorage.getItem(\"saveMovies\")));\n          setMovies(JSON.parse(localStorage.getItem(\"movies\")));\n          setLoaded(false);\n        }).catch(err => {\n          console.log(err);\n          handleInfoTooltip({\n            union: unionFalse,\n            text: \"Ошибка обновления данных\"\n          });\n        });\n      }\n    }, 1000);\n  }, [loggedIn]);\n  useEffect(() => {\n    const token = localStorage.getItem(\"token\");\n\n    if (!token) {\n      setPermissonCheck(true);\n      return;\n    }\n\n    checkToken();\n    setPermissonCheck(true);\n    setLoggedIn(true);\n    setCheckedFilms(JSON.parse(localStorage.getItem(\"checkedFilms\")));\n    setCheckedSaveFilms(JSON.parse(localStorage.getItem(\"checkedSaveFilms\")));\n  }, []);\n  useEffect(() => {\n    setFilterMovies(JSON.parse(localStorage.getItem(\"moviesSearch\")));\n    setIsFiltered(JSON.parse(localStorage.getItem(\"isFiltered\")));\n  }, []); // Обновление короткометражек\n\n  useEffect(() => {\n    setShortMovies(JSON.parse(localStorage.getItem(\"durationMovieShort\")));\n    setShortMoviesSave(JSON.parse(localStorage.getItem(\"durationMovieShortSave\")));\n  }, []); // Поиск фильмов\n\n  function handleEnter(search) {\n    const moviesFilter = movies ? movies.filter(movie => {\n      return movie.nameRU.toLowerCase().includes(search.toLowerCase());\n    }) : [];\n    localStorage.setItem(\"moviesSearch\", JSON.stringify(moviesFilter));\n    localStorage.setItem(\"isFiltered\", JSON.stringify(true));\n    localStorage.setItem(\"moviesSearchValue\", JSON.stringify(search));\n    setTimeout(() => {\n      setLoaded(false);\n      setFilterMovies(JSON.parse(localStorage.getItem(\"moviesSearch\")));\n      setIsFiltered(JSON.parse(localStorage.getItem(\"isFiltered\")));\n      setValueSearch(JSON.parse(window.localStorage.getItem(\"moviesSearchValue\")));\n    }, 450);\n  } // Сохранение фильма\n\n\n  function handleSaveMovie(movieData) {\n    setSaveMovies([...saveMovies, movieData]);\n    mainApi.saveMovie(movieData).then(newMovie => {\n      setSaveMovies([...saveMovies, newMovie]);\n      localStorage.setItem(\"saveMovies\", JSON.stringify([...saveMovies, newMovie]));\n    }).catch(err => {\n      console.log(err);\n    });\n  } // Поиск сохраненных фильмов\n\n\n  function handleSearchSaveMovie(search) {\n    const moviesSaveFilter = saveMovies ? saveMovies.filter(movie => {\n      return movie.nameRU.toLowerCase().includes(search.toLowerCase());\n    }) : [];\n    localStorage.setItem(\"isFilteredSave\", JSON.stringify(true));\n    setTimeout(() => {\n      setLoaded(false);\n      setFilterSaveMovies(moviesSaveFilter);\n      setIsFilteredSave(JSON.parse(localStorage.getItem(\"isFilteredSave\")));\n    }, 450);\n  } // Функция удаления из избранного\n\n\n  function handleDeleteSaveMovie(saveMovie) {\n    mainApi.deleteMovie(saveMovie._id || saveMovie.id).then(() => {\n      const newCardsArr = saveMovies.filter(c => c._id !== saveMovie._id);\n      const newSavedCardsArr = saveMovies.filter(c => c._id !== saveMovie._id);\n      setSaveMovies(newCardsArr);\n      setFilterSaveMovies(newSavedCardsArr);\n      handleInfoTooltip({\n        union: unionTrue,\n        text: \"Фильм удален\"\n      });\n      localStorage.removeItem(\"saveMovies\", JSON.stringify(newCardsArr));\n      localStorage.removeItem(\"saveMovies\", JSON.stringify(newSavedCardsArr));\n    }).catch(err => {\n      console.log(err);\n      handleInfoTooltip({\n        union: unionFalse,\n        text: \"Нельзя удалить чужой фильм\"\n      });\n    });\n  } // Регистрация\n\n\n  function handleRegistration(name, email, password) {\n    auth.register(name, email, password).then(res => {\n      if (res) {\n        handleInfoTooltip({\n          union: unionTrue,\n          text: \"Вы успешно зарегистрировались!\"\n        });\n        handleAuthorization(email, password);\n        history.push(\"/movies\");\n      }\n    }).catch(err => {\n      console.log(err);\n      handleInfoTooltip({\n        union: unionFalse,\n        text: `Пользователь с таким email ${email} уже существует`\n      });\n    });\n  } // Авторизация\n\n\n  function handleAuthorization(emailLogin, passwordLogin) {\n    auth.authorization(emailLogin, passwordLogin).then(res => {\n      if (res) {\n        localStorage.setItem(\"token\", res.token);\n        localStorage.setItem(\"moviesSearch\", JSON.stringify(filterMovies));\n        window.localStorage.setItem(\"moviesSearchValue\", JSON.stringify(valueSearch));\n        setLoggedIn(true);\n        handleInfoTooltip({\n          union: unionTrue,\n          text: \"Вы успешно вошли!\"\n        });\n        history.push(\"/movies\");\n      }\n    }).then(() => {\n      checkToken();\n    }).catch(err => {\n      console.log(err);\n      handleInfoTooltip({\n        union: unionFalse,\n        text: \"Вы ввели неправильный логин или пароль\"\n      });\n    });\n  } // Обновление пользователя\n\n\n  function handleUpdateUser(user) {\n    mainApi.editProfile(user).then(user => {\n      setCurrentUser(user);\n      handleInfoTooltip({\n        union: unionTrue,\n        text: \"Профиль обновлен \"\n      });\n      localStorage.setItem(\"user\", JSON.stringify(user));\n    }).catch(err => {\n      console.log(`Внимание! ${err}`);\n      handleInfoTooltip({\n        union: unionFalse,\n        text: `Пользователь с таким ${user.email} уже существует`\n      });\n    });\n  } // Короткометражки фильмов\n\n\n  function checkShortFilms(e) {\n    setLoaded(true);\n    localStorage.setItem(\"checkedFilms\", JSON.stringify(!checkedFilms));\n    setTimeout(() => {\n      if (!checkedFilms) {\n        const durationMovieShort = movies.filter(movie => movie.duration <= 40);\n        const durationMovieShortSearch = filterMovies.filter(movie => movie.duration <= 40);\n        localStorage.setItem(\"durationMovieShort\", JSON.stringify(durationMovieShort));\n        localStorage.setItem(\"durationMovieShort\", JSON.stringify(durationMovieShortSearch));\n        setShortMovies(JSON.parse(localStorage.getItem(\"durationMovieShort\")));\n      } else {\n        setMovies(movies);\n      }\n\n      setLoaded(false);\n    }, 450);\n    setCheckedFilms(!checkedFilms);\n  } // Короткометражки сохраненных фильмов\n\n\n  function checkShortFilmsSave(e) {\n    setLoaded(true);\n    localStorage.setItem(\"checkedSaveFilms\", JSON.stringify(!checkedSaveFilms));\n    setTimeout(() => {\n      if (!checkedSaveFilms) {\n        const durationMovieShortSave = saveMovies.filter(movie => movie.duration <= 40);\n        const durationMovieShortSaveSearch = saveFilterSaveMovies.filter(movie => movie.duration <= 40);\n        localStorage.setItem(\"durationMovieShortSave\", JSON.stringify(durationMovieShortSave));\n        localStorage.setItem(\"durationMovieShortSaveSearch\", JSON.stringify(durationMovieShortSaveSearch));\n        setShortMoviesSave(JSON.parse(localStorage.getItem(\"durationMovieShortSave\")));\n      } else {\n        setSaveMovies(saveMovies);\n      }\n\n      setLoaded(false);\n    }, 450);\n    setCheckedSaveFilms(!checkedSaveFilms);\n  } // Выход\n\n\n  function handleSignOut() {\n    setLoggedIn(false);\n    setCurrentUser([]);\n    setCheckedFilms(false);\n    setCheckedSaveFilms(false);\n    localStorage.clear();\n    history.push(\"/\");\n  }\n\n  if (!permissonCheck) {\n    return null;\n  }\n\n  return /*#__PURE__*/_jsxDEV(CurrentUserContext.Provider, {\n    value: currentUser,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"app\",\n      children: /*#__PURE__*/_jsxDEV(Switch, {\n        children: [/*#__PURE__*/_jsxDEV(Route, {\n          exact: true,\n          path: \"/\",\n          component: Main\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 365,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ProtectedRoute, {\n          path: \"/movies\",\n          component: Movies,\n          loggedIn: loggedIn,\n          handleEnter: handleEnter,\n          loaded: loaded,\n          isFiltered: isFiltered,\n          movies: movies,\n          filterMovies: filterMovies,\n          handleSaveMovie: handleSaveMovie,\n          saveMovies: saveMovies,\n          handleDeleteSaveMovie: movie => handleDeleteSaveMovie(movie),\n          checkShortFilms: checkShortFilms,\n          onCheckedFilms: checkedFilms,\n          shortMovies: shortMovies,\n          pathMovies: pathMovies,\n          valueSearch: valueSearch\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 366,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ProtectedRoute, {\n          path: \"/saved-movies\",\n          component: SavedMovies,\n          loggedIn: loggedIn,\n          loaded: loaded,\n          handleSearchSaveMovie: handleSearchSaveMovie,\n          isFilteredSave: isFilteredSave,\n          saveMovies: saveMovies,\n          handleDeleteSaveMovie: handleDeleteSaveMovie,\n          saveFilterSaveMovies: saveFilterSaveMovies,\n          checkShortFilmsSave: checkShortFilmsSave,\n          onCheckedSaveFilms: checkedSaveFilms,\n          shortMovies: shortMoviesSave,\n          pathMoviesSave: pathMoviesSave\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 384,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ProtectedRoute, {\n          path: \"/profile\",\n          component: Profile,\n          onUpdateUser: handleUpdateUser,\n          handleSignOut: handleSignOut,\n          loggedIn: loggedIn\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 399,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(BlockRouteUser, {\n          path: \"/signin\",\n          component: Login,\n          handleAuthorization: handleAuthorization,\n          loggedIn: loggedIn\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 406,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(BlockRouteUser, {\n          path: \"/signup\",\n          component: Register,\n          handleRegistration: handleRegistration,\n          loggedIn: loggedIn\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 412,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"*\",\n          component: Error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 418,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 364,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 363,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 362,\n    columnNumber: 5\n  }, this);\n}\n\n_s(App, \"LNqDe/Jgc2W4B0itMe127k8o2og=\", false, function () {\n  return [useLocation, useHistory];\n});\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["useEffect","useState","Route","Switch","useLocation","useHistory","Main","Movies","SavedMovies","Register","Profile","Login","Error","CurrentUserContext","mainApi","auth","ProtectedRoute","moviesApi","unionTrue","unionFalse","BlockRouteUser","App","valueData","JSON","parse","localStorage","getItem","location","history","currentUser","setCurrentUser","loggedIn","setLoggedIn","movies","setMovies","filterMovies","setFilterMovies","saveMovies","setSaveMovies","saveFilterSaveMovies","setFilterSaveMovies","shortMovies","setShortMovies","shortMoviesSave","setShortMoviesSave","isData","setData","valueSearch","setValueSearch","loaded","setLoaded","isFiltered","setIsFiltered","isFilteredSave","setIsFilteredSave","checkedFilms","setCheckedFilms","checkedSaveFilms","setCheckedSaveFilms","permissonCheck","setPermissonCheck","pathHeadersArray","pathFootersArray","pathMovies","pathname","pathMoviesSave","checkToken","token","examinationValidationToken","then","res","setItem","stringify","catch","err","console","log","removeItem","handleInfoTooltip","union","text","setTimeout","Promise","all","getMovies","getAboutUser","getSaveMovies","user","userSaveMovie","filter","movie","owner","_id","handleEnter","search","moviesFilter","nameRU","toLowerCase","includes","window","handleSaveMovie","movieData","saveMovie","newMovie","handleSearchSaveMovie","moviesSaveFilter","handleDeleteSaveMovie","deleteMovie","id","newCardsArr","c","newSavedCardsArr","handleRegistration","name","email","password","register","handleAuthorization","push","emailLogin","passwordLogin","authorization","handleUpdateUser","editProfile","checkShortFilms","e","durationMovieShort","duration","durationMovieShortSearch","checkShortFilmsSave","durationMovieShortSave","durationMovieShortSaveSearch","handleSignOut","clear"],"sources":["C:/Users/Михаил/dev/movies-explorer-frontend/src/components/App/App.js"],"sourcesContent":["import '../App/App.css';\r\nimport { useEffect, useState } from 'react';\r\nimport { Route, Switch, useLocation, useHistory } from 'react-router-dom';\r\n\r\nimport Main from '../Main/Main';\r\nimport Movies from '../Movies/Movies';\r\nimport SavedMovies from '../SavedMovies/SavedMovies';\r\nimport Register from '../Register/Register';\r\nimport Profile from '../Profile/Profile';\r\nimport Login from '../Login/Login';\r\nimport Error from \"../Error/Error\";\r\n\r\nimport { CurrentUserContext } from \"../context/CurrentUserContext\";\r\nimport mainApi from \"../../utils/MainApi\";\r\nimport * as auth from \"../../utils/auth\";\r\nimport ProtectedRoute from \"../ProtectedRoute/ProtectedRoute\";\r\nimport moviesApi from \"../../utils/MoviesApi\";\r\n\r\nimport unionTrue from \"../../images/union.svg\";\r\nimport unionFalse from \"../../images/unionerror.svg\";\r\nimport BlockRouteUser from \"../BlockRouteUser/BlockRouteUser\";\r\n\r\nfunction App() {\r\n\r\n  const valueData = JSON.parse(localStorage.getItem(\"moviesSearchValue\"));\r\n  const location = useLocation();\r\n  const history = useHistory();\r\n  const [currentUser, setCurrentUser] = useState([]);\r\n  const [loggedIn, setLoggedIn] = useState(false);\r\n  const [movies, setMovies] = useState([]);\r\n  const [filterMovies, setFilterMovies] = useState([]);\r\n  const [saveMovies, setSaveMovies] = useState([]);\r\n  const [saveFilterSaveMovies, setFilterSaveMovies] = useState([]);\r\n  const [shortMovies, setShortMovies] = useState([]);\r\n  const [shortMoviesSave, setShortMoviesSave] = useState([]);\r\n  const [isData, setData] = useState({});\r\n  const [valueSearch, setValueSearch] = useState(valueData);\r\n  const [loaded, setLoaded] = useState(true);\r\n  const [isFiltered, setIsFiltered] = useState(false);\r\n  const [isFilteredSave, setIsFilteredSave] = useState(false);\r\n  const [checkedFilms, setCheckedFilms] = useState(false);\r\n  const [checkedSaveFilms, setCheckedSaveFilms] = useState(false);\r\n  const [permissonCheck, setPermissonCheck] = useState(false);\r\n  const pathHeadersArray = [\"/\", \"/movies\", \"/saved-movies\", \"/profile\"];\r\n  const pathFootersArray = [\"/\", \"/movies\", \"/saved-movies\"];\r\n  const pathMovies = location.pathname === \"/movies\";\r\n  const pathMoviesSave = location.pathname === \"/saved-movies\";\r\n\r\n  // проверка токенов авторизованных пользователей, вернувшихся в приложение\r\n  function checkToken() {\r\n    const token = localStorage.getItem(\"token\");\r\n    if (token) {\r\n      auth\r\n        .examinationValidationToken(token)\r\n        .then((res) => {\r\n          setCurrentUser(res);\r\n          setLoggedIn(true);\r\n          localStorage.setItem(\"user\", JSON.stringify(res));\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n          localStorage.removeItem(\"token\");\r\n          handleInfoTooltip({\r\n            union: unionFalse,\r\n            text: \"Ошибка токена\",\r\n          });\r\n        });\r\n    }\r\n  }\r\n\r\n  // Загрузка данных пользователя и фильмов\r\n  useEffect(() => {\r\n    setLoaded(true);\r\n    setTimeout(() => {\r\n      if (loggedIn) {\r\n        Promise.all([\r\n          moviesApi.getMovies(),\r\n          mainApi.getAboutUser(),\r\n          mainApi.getSaveMovies(),\r\n        ])\r\n          .then(([movies, user, saveMovies]) => {\r\n            localStorage.setItem(\"user\", JSON.stringify(user));\r\n            setCurrentUser(JSON.parse(localStorage.getItem(\"user\")));\r\n            const userSaveMovie = saveMovies.filter(\r\n              (movie) => movie.owner === user._id\r\n            );\r\n            localStorage.setItem(\"saveMovies\", JSON.stringify(userSaveMovie));\r\n            localStorage.setItem(\"movies\", JSON.stringify(movies));\r\n            setSaveMovies(JSON.parse(localStorage.getItem(\"saveMovies\")));\r\n            setMovies(JSON.parse(localStorage.getItem(\"movies\")));\r\n            setLoaded(false);\r\n          })\r\n          .catch((err) => {\r\n            console.log(err);\r\n            handleInfoTooltip({\r\n              union: unionFalse,\r\n              text: \"Ошибка обновления данных\",\r\n            });\r\n          });\r\n      }\r\n    }, 1000);\r\n  }, [loggedIn]);\r\n\r\n  useEffect(() => {\r\n    const token = localStorage.getItem(\"token\");\r\n    if (!token) {\r\n      setPermissonCheck(true);\r\n      return;\r\n    }\r\n    checkToken();\r\n    setPermissonCheck(true);\r\n    setLoggedIn(true);\r\n    setCheckedFilms(JSON.parse(localStorage.getItem(\"checkedFilms\")));\r\n    setCheckedSaveFilms(JSON.parse(localStorage.getItem(\"checkedSaveFilms\")));\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    setFilterMovies(JSON.parse(localStorage.getItem(\"moviesSearch\")));\r\n    setIsFiltered(JSON.parse(localStorage.getItem(\"isFiltered\")));\r\n  }, []);\r\n\r\n  // Обновление короткометражек\r\n  useEffect(() => {\r\n    setShortMovies(JSON.parse(localStorage.getItem(\"durationMovieShort\")));\r\n    setShortMoviesSave(\r\n      JSON.parse(localStorage.getItem(\"durationMovieShortSave\"))\r\n    );\r\n  }, []);\r\n\r\n  // Поиск фильмов\r\n  function handleEnter(search) {\r\n    const moviesFilter = movies\r\n      ? movies.filter((movie) => {\r\n          return movie.nameRU.toLowerCase().includes(search.toLowerCase());\r\n        })\r\n      : [];\r\n    localStorage.setItem(\"moviesSearch\", JSON.stringify(moviesFilter));\r\n    localStorage.setItem(\"isFiltered\", JSON.stringify(true));\r\n    localStorage.setItem(\"moviesSearchValue\", JSON.stringify(search));\r\n    setTimeout(() => {\r\n      setLoaded(false);\r\n      setFilterMovies(JSON.parse(localStorage.getItem(\"moviesSearch\")));\r\n      setIsFiltered(JSON.parse(localStorage.getItem(\"isFiltered\")));\r\n      setValueSearch(\r\n        JSON.parse(window.localStorage.getItem(\"moviesSearchValue\"))\r\n      );\r\n    }, 450);\r\n  }\r\n\r\n  // Сохранение фильма\r\n  function handleSaveMovie(movieData) {\r\n    setSaveMovies([...saveMovies, movieData]);\r\n    mainApi\r\n      .saveMovie(movieData)\r\n      .then((newMovie) => {\r\n        setSaveMovies([...saveMovies, newMovie]);\r\n        localStorage.setItem(\r\n          \"saveMovies\",\r\n          JSON.stringify([...saveMovies, newMovie])\r\n        );\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  }\r\n\r\n  // Поиск сохраненных фильмов\r\n  function handleSearchSaveMovie(search) {\r\n    const moviesSaveFilter = saveMovies\r\n      ? saveMovies.filter((movie) => {\r\n          return movie.nameRU.toLowerCase().includes(search.toLowerCase());\r\n        })\r\n      : [];\r\n    localStorage.setItem(\"isFilteredSave\", JSON.stringify(true));\r\n    setTimeout(() => {\r\n      setLoaded(false);\r\n      setFilterSaveMovies(moviesSaveFilter);\r\n      setIsFilteredSave(JSON.parse(localStorage.getItem(\"isFilteredSave\")));\r\n    }, 450);\r\n  }\r\n\r\n  // Функция удаления из избранного\r\n  function handleDeleteSaveMovie(saveMovie) {\r\n    mainApi\r\n      .deleteMovie(saveMovie._id || saveMovie.id)\r\n      .then(() => {\r\n        const newCardsArr = saveMovies.filter((c) => c._id !== saveMovie._id);\r\n        const newSavedCardsArr = saveMovies.filter(\r\n          (c) => c._id !== saveMovie._id\r\n        );\r\n        setSaveMovies(newCardsArr);\r\n        setFilterSaveMovies(newSavedCardsArr);\r\n        handleInfoTooltip({\r\n          union: unionTrue,\r\n          text: \"Фильм удален\",\r\n        });\r\n        localStorage.removeItem(\"saveMovies\", JSON.stringify(newCardsArr));\r\n        localStorage.removeItem(\"saveMovies\", JSON.stringify(newSavedCardsArr));\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        handleInfoTooltip({\r\n          union: unionFalse,\r\n          text: \"Нельзя удалить чужой фильм\",\r\n        });\r\n      });\r\n  }\r\n\r\n  // Регистрация\r\n  function handleRegistration(name, email, password) {\r\n    auth\r\n      .register(name, email, password)\r\n      .then((res) => {\r\n        if (res) {\r\n          handleInfoTooltip({\r\n            union: unionTrue,\r\n            text: \"Вы успешно зарегистрировались!\",\r\n          });\r\n          handleAuthorization(email, password);\r\n          history.push(\"/movies\");\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        handleInfoTooltip({\r\n          union: unionFalse,\r\n          text: `Пользователь с таким email ${email} уже существует`,\r\n        });\r\n      });\r\n  }\r\n\r\n  // Авторизация\r\n  function handleAuthorization(emailLogin, passwordLogin) {\r\n    auth\r\n      .authorization(emailLogin, passwordLogin)\r\n      .then((res) => {\r\n        if (res) {\r\n          localStorage.setItem(\"token\", res.token);\r\n          localStorage.setItem(\"moviesSearch\", JSON.stringify(filterMovies));\r\n          window.localStorage.setItem(\r\n            \"moviesSearchValue\",\r\n            JSON.stringify(valueSearch)\r\n          );\r\n          setLoggedIn(true);\r\n          handleInfoTooltip({\r\n            union: unionTrue,\r\n            text: \"Вы успешно вошли!\",\r\n          });\r\n          history.push(\"/movies\");\r\n        }\r\n      })\r\n      .then(() => {\r\n        checkToken();\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        handleInfoTooltip({\r\n          union: unionFalse,\r\n          text: \"Вы ввели неправильный логин или пароль\",\r\n        });\r\n      });\r\n  }\r\n\r\n  // Обновление пользователя\r\n  function handleUpdateUser(user) {\r\n    mainApi\r\n      .editProfile(user)\r\n      .then((user) => {\r\n        setCurrentUser(user);\r\n        handleInfoTooltip({\r\n          union: unionTrue,\r\n          text: \"Профиль обновлен \",\r\n        });\r\n        localStorage.setItem(\"user\", JSON.stringify(user));\r\n      })\r\n      .catch((err) => {\r\n        console.log(`Внимание! ${err}`);\r\n        handleInfoTooltip({\r\n          union: unionFalse,\r\n          text: `Пользователь с таким ${user.email} уже существует`,\r\n        });\r\n      });\r\n  }\r\n\r\n  // Короткометражки фильмов\r\n  function checkShortFilms(e) {\r\n    setLoaded(true);\r\n    localStorage.setItem(\"checkedFilms\", JSON.stringify(!checkedFilms));\r\n    setTimeout(() => {\r\n      if (!checkedFilms) {\r\n        const durationMovieShort = movies.filter(\r\n          (movie) => movie.duration <= 40\r\n        );\r\n        const durationMovieShortSearch = filterMovies.filter(\r\n          (movie) => movie.duration <= 40\r\n        );\r\n        localStorage.setItem(\r\n          \"durationMovieShort\",\r\n          JSON.stringify(durationMovieShort)\r\n        );\r\n        localStorage.setItem(\r\n          \"durationMovieShort\",\r\n          JSON.stringify(durationMovieShortSearch)\r\n        );\r\n        setShortMovies(JSON.parse(localStorage.getItem(\"durationMovieShort\")));\r\n      } else {\r\n        setMovies(movies);\r\n      }\r\n      setLoaded(false);\r\n    }, 450);\r\n    setCheckedFilms(!checkedFilms);\r\n  }\r\n\r\n  // Короткометражки сохраненных фильмов\r\n  function checkShortFilmsSave(e) {\r\n    setLoaded(true);\r\n    localStorage.setItem(\"checkedSaveFilms\", JSON.stringify(!checkedSaveFilms));\r\n    setTimeout(() => {\r\n      if (!checkedSaveFilms) {\r\n        const durationMovieShortSave = saveMovies.filter(\r\n          (movie) => movie.duration <= 40\r\n        );\r\n\r\n        const durationMovieShortSaveSearch = saveFilterSaveMovies.filter(\r\n          (movie) => movie.duration <= 40\r\n        );\r\n\r\n        localStorage.setItem(\r\n          \"durationMovieShortSave\",\r\n          JSON.stringify(durationMovieShortSave)\r\n        );\r\n        localStorage.setItem(\r\n          \"durationMovieShortSaveSearch\",\r\n          JSON.stringify(durationMovieShortSaveSearch)\r\n        );\r\n        setShortMoviesSave(\r\n          JSON.parse(localStorage.getItem(\"durationMovieShortSave\"))\r\n        );\r\n      } else {\r\n        setSaveMovies(saveMovies);\r\n      }\r\n      setLoaded(false);\r\n    }, 450);\r\n    setCheckedSaveFilms(!checkedSaveFilms);\r\n  }\r\n\r\n  // Выход\r\n  function handleSignOut() {\r\n    setLoggedIn(false);\r\n    setCurrentUser([]);\r\n    setCheckedFilms(false);\r\n    setCheckedSaveFilms(false);\r\n    localStorage.clear();\r\n    history.push(\"/\");\r\n  }\r\n\r\n  if (!permissonCheck) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <CurrentUserContext.Provider value={currentUser}>\r\n      <div className='app'>\r\n        <Switch>\r\n          <Route exact path=\"/\" component={Main} />\r\n          <ProtectedRoute\r\n            path=\"/movies\"\r\n            component={Movies}\r\n            loggedIn={loggedIn}\r\n            handleEnter={handleEnter}\r\n            loaded={loaded}\r\n            isFiltered={isFiltered}\r\n            movies={movies}\r\n            filterMovies={filterMovies}\r\n            handleSaveMovie={handleSaveMovie}\r\n            saveMovies={saveMovies}\r\n            handleDeleteSaveMovie={(movie) => handleDeleteSaveMovie(movie)}\r\n            checkShortFilms={checkShortFilms}\r\n            onCheckedFilms={checkedFilms}\r\n            shortMovies={shortMovies}\r\n            pathMovies={pathMovies}\r\n            valueSearch={valueSearch}\r\n          />\r\n          <ProtectedRoute\r\n            path=\"/saved-movies\"\r\n            component={SavedMovies}\r\n            loggedIn={loggedIn}\r\n            loaded={loaded}\r\n            handleSearchSaveMovie={handleSearchSaveMovie}\r\n            isFilteredSave={isFilteredSave}\r\n            saveMovies={saveMovies}\r\n            handleDeleteSaveMovie={handleDeleteSaveMovie}\r\n            saveFilterSaveMovies={saveFilterSaveMovies}\r\n            checkShortFilmsSave={checkShortFilmsSave}\r\n            onCheckedSaveFilms={checkedSaveFilms}\r\n            shortMovies={shortMoviesSave}\r\n            pathMoviesSave={pathMoviesSave}\r\n          />\r\n          <ProtectedRoute\r\n            path=\"/profile\"\r\n            component={Profile}\r\n            onUpdateUser={handleUpdateUser}\r\n            handleSignOut={handleSignOut}\r\n            loggedIn={loggedIn}\r\n          />\r\n          <BlockRouteUser\r\n            path=\"/signin\"\r\n            component={Login}\r\n            handleAuthorization={handleAuthorization}\r\n            loggedIn={loggedIn}\r\n          />\r\n          <BlockRouteUser\r\n            path=\"/signup\"\r\n            component={Register}\r\n            handleRegistration={handleRegistration}\r\n            loggedIn={loggedIn}\r\n          />\r\n          <Route path=\"*\" component={Error} />\r\n        </Switch>\r\n      </div>\r\n    </CurrentUserContext.Provider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}