{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\\\u041C\\u0438\\u0445\\u0430\\u0438\\u043B\\\\dev\\\\movies-explorer-frontend\\\\src\\\\components\\\\App\\\\App.js\",\n    _s = $RefreshSig$();\n\nimport '../App/App.css';\nimport { useEffect, useState } from 'react';\nimport { Route, Switch, useLocation, useHistory } from 'react-router-dom';\nimport Main from '../Main/Main';\nimport Movies from '../Movies/Movies';\nimport SavedMovies from '../SavedMovies/SavedMovies';\nimport Register from '../Register/Register';\nimport Profile from '../Profile/Profile';\nimport Login from '../Login/Login';\nimport NotFound from \"../NotFound/NotFound\";\nimport { CurrentUserContext } from \"../context/CurrentUserContext\";\nimport mainApi from \"../../utils/MainApi\";\nimport * as auth from \"../../utils/auth\";\nimport ProtectedRoute from \"../ProtectedRoute/ProtectedRoute\";\nimport moviesApi from \"../../utils/MoviesApi\";\nimport BlockRouteUser from \"../BlockRouteUser/BlockRouteUser\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction App() {\n  _s();\n\n  const valueData = JSON.parse(localStorage.getItem(\"moviesSearchValue\"));\n  const location = useLocation();\n  const history = useHistory();\n  const [isLoginMessage, setLoginMessage] = useState(\"\");\n  const [isRegisterMessage, setRegisterMessage] = useState(false);\n  const [currentUser, setCurrentUser] = useState([]);\n  const [loggedIn, setLoggedIn] = useState(false);\n  const [movies, setMovies] = useState([]);\n  const [filterMovies, setFilterMovies] = useState([]);\n  const [saveMovies, setSaveMovies] = useState([]);\n  const [saveFilterSaveMovies, setFilterSaveMovies] = useState([]);\n  const [shortMovies, setShortMovies] = useState([]);\n  const [shortMoviesSave, setShortMoviesSave] = useState([]);\n  const [valueSearch, setValueSearch] = useState(valueData);\n  const [loaded, setLoaded] = useState(true);\n  const [isFiltered, setIsFiltered] = useState(false);\n  const [isFilteredSave, setIsFilteredSave] = useState(false);\n  const [checkedFilms, setCheckedFilms] = useState(false);\n  const [checkedSaveFilms, setCheckedSaveFilms] = useState(false);\n  const [permissonCheck, setPermissonCheck] = useState(false);\n  const pathMovies = location.pathname === \"/movies\";\n  const pathMoviesSave = location.pathname === \"/saved-movies\"; // проверка токенов авторизованных пользователей, вернувшихся в приложение\n\n  function checkToken() {\n    const token = localStorage.getItem(\"token\");\n\n    if (token) {\n      auth.examinationValidationToken(token).then(res => {\n        setCurrentUser(res);\n        setLoggedIn(true);\n        localStorage.setItem(\"user\", JSON.stringify(res));\n      }).catch(err => {\n        handleSignOut();\n        console.log(err);\n        localStorage.removeItem(\"token\");\n      });\n    }\n  } // Загрузка данных пользователя и фильмов\n\n\n  useEffect(() => {\n    setLoaded(true);\n    setTimeout(() => {\n      if (loggedIn) {\n        Promise.all([moviesApi.getMovies(), mainApi.getAboutUser(), mainApi.getSaveMovies()]).then(_ref => {\n          let [movies, user, saveMovies] = _ref;\n          localStorage.setItem(\"user\", JSON.stringify(user));\n          setCurrentUser(JSON.parse(localStorage.getItem(\"user\")));\n          const userSaveMovie = saveMovies.filter(movie => movie.owner === user._id);\n          localStorage.setItem(\"saveMovies\", JSON.stringify(userSaveMovie));\n          const before = movies.slice(0, 23);\n          const after = movies.slice(24);\n          const arrMovies = before.concat(after);\n          localStorage.setItem(\"allMovies\", JSON.stringify(arrMovies));\n          setSaveMovies(JSON.parse(localStorage.getItem(\"saveMovies\")));\n          setMovies(JSON.parse(localStorage.getItem(\"allMovies\")));\n          setLoaded(false);\n        }).catch(err => {\n          console.log(err);\n        });\n      }\n    }, 1000);\n  }, [loggedIn]);\n  useEffect(() => {\n    const token = localStorage.getItem(\"token\");\n\n    if (!token) {\n      setPermissonCheck(true);\n      return;\n    }\n\n    checkToken();\n    setPermissonCheck(true);\n    setLoggedIn(true);\n    setCheckedFilms(JSON.parse(localStorage.getItem(\"checkedFilms\")));\n    setCheckedSaveFilms(JSON.parse(localStorage.getItem(\"checkedSaveFilms\")));\n  }, []);\n  useEffect(() => {\n    setFilterMovies(JSON.parse(localStorage.getItem(\"moviesSearch\")));\n    setIsFiltered(JSON.parse(localStorage.getItem(\"isFiltered\")));\n  }, []); // Обновление короткометражек\n\n  useEffect(() => {\n    setShortMovies(JSON.parse(localStorage.getItem(\"durationMovieShort\")));\n    setShortMoviesSave(JSON.parse(localStorage.getItem(\"durationMovieShortSave\")));\n  }, []); // Поиск фильмов\n\n  function handleEnter(search) {\n    const moviesFilter = movies ? movies.filter(movie => {\n      return movie.nameRU.toLowerCase().includes(search.toLowerCase());\n    }) : [];\n    localStorage.setItem(\"moviesSearch\", JSON.stringify(moviesFilter));\n    localStorage.setItem(\"isFiltered\", JSON.stringify(true));\n    localStorage.setItem(\"moviesSearchValue\", JSON.stringify(search));\n    setTimeout(() => {\n      setLoaded(false);\n      setFilterMovies(JSON.parse(localStorage.getItem(\"moviesSearch\")));\n      setIsFiltered(JSON.parse(localStorage.getItem(\"isFiltered\")));\n      setValueSearch(JSON.parse(window.localStorage.getItem(\"moviesSearchValue\")));\n    }, 450);\n  } // Сохранение фильма\n\n\n  function handleSaveMovie(movieData) {\n    setSaveMovies([...saveMovies, movieData]);\n    mainApi.saveMovie(movieData).then(newMovie => {\n      setSaveMovies([...saveMovies, newMovie]);\n      localStorage.setItem(\"saveMovies\", JSON.stringify([...saveMovies, newMovie]));\n    }).catch(err => {\n      console.log(err);\n    });\n  } // Поиск сохраненных фильмов\n\n\n  function handleSearchSaveMovie(search) {\n    const moviesSaveFilter = saveMovies ? saveMovies.filter(movie => {\n      return movie.nameRU.toLowerCase().includes(search.toLowerCase());\n    }) : [];\n    localStorage.setItem(\"isFilteredSave\", JSON.stringify(true));\n    setTimeout(() => {\n      setLoaded(false);\n      setFilterSaveMovies(moviesSaveFilter);\n      setIsFilteredSave(JSON.parse(localStorage.getItem(\"isFilteredSave\")));\n    }, 450);\n  } // Функция удаления из избранного\n\n\n  function handleDeleteSaveMovie(saveMovie) {\n    mainApi.deleteMovie(saveMovie._id || saveMovie.id).then(() => {\n      const newCardsArr = saveMovies.filter(c => c._id !== saveMovie._id);\n      const newSavedCardsArr = saveMovies.filter(c => c._id !== saveMovie._id);\n      setSaveMovies(newCardsArr);\n      setFilterSaveMovies(newSavedCardsArr);\n      localStorage.removeItem(\"saveMovies\", JSON.stringify(newCardsArr));\n      localStorage.removeItem(\"saveMovies\", JSON.stringify(newSavedCardsArr));\n    }).catch(err => {\n      console.log(err);\n    });\n  } // Регистрация\n\n\n  function handleRegistration(name, email, password) {\n    auth.register(name, email, password).then(res => {\n      if (res) {\n        handleAuthorization(email, password);\n        history.push(\"/movies\");\n      }\n    }).catch(err => {\n      err.status !== 400 ? setRegisterMessage(\"Пользователь с таким email уже зарегистрирован\") : setRegisterMessage(\"При регистрации пользователя произошла ошибка.\");\n      console.log(err);\n    });\n  } // Авторизация\n\n\n  function handleAuthorization(emailLogin, passwordLogin) {\n    auth.authorization(emailLogin, passwordLogin).then(res => {\n      if (res) {\n        localStorage.setItem(\"token\", res.token);\n        localStorage.setItem(\"moviesSearch\", JSON.stringify(filterMovies));\n        window.localStorage.setItem(\"moviesSearchValue\", JSON.stringify(valueSearch));\n        setLoggedIn(true);\n        history.push(\"/movies\");\n      }\n    }).then(() => {\n      checkToken();\n    }).catch(err => {\n      setLoginMessage(\"Вы ввели неправильный логин или пароль.\");\n      console.log(err);\n    });\n  } // Обновление пользователя\n\n\n  function handleUpdateUser(user) {\n    mainApi.editProfile(user).then(user => {\n      setCurrentUser(user);\n      localStorage.setItem(\"user\", JSON.stringify(user));\n    }).catch(err => {\n      console.log(`Внимание! ${err}`);\n    });\n  } // Короткометражки фильмов\n\n\n  function checkShortFilms(e) {\n    setLoaded(true);\n    localStorage.setItem(\"checkedFilms\", JSON.stringify(!checkedFilms));\n    setTimeout(() => {\n      if (!checkedFilms) {\n        const durationMovieShort = movies.filter(movie => movie.duration <= 40);\n        const durationMovieShortSearch = filterMovies.filter(movie => movie.duration <= 40);\n        localStorage.setItem(\"durationMovieShort\", JSON.stringify(durationMovieShort));\n        localStorage.setItem(\"durationMovieShort\", JSON.stringify(durationMovieShortSearch));\n        setShortMovies(JSON.parse(localStorage.getItem(\"durationMovieShort\")));\n      } else {\n        setMovies(movies);\n      }\n\n      setLoaded(false);\n    }, 450);\n    setCheckedFilms(!checkedFilms);\n  } // Короткометражки сохраненных фильмов\n\n\n  function checkShortFilmsSave(e) {\n    setLoaded(true);\n    localStorage.setItem(\"checkedSaveFilms\", JSON.stringify(!checkedSaveFilms));\n    setTimeout(() => {\n      if (!checkedSaveFilms) {\n        const durationMovieShortSave = saveMovies.filter(movie => movie.duration <= 40);\n        const durationMovieShortSaveSearch = saveFilterSaveMovies.filter(movie => movie.duration <= 40);\n        localStorage.setItem(\"durationMovieShortSave\", JSON.stringify(durationMovieShortSave));\n        localStorage.setItem(\"durationMovieShortSaveSearch\", JSON.stringify(durationMovieShortSaveSearch));\n        setShortMoviesSave(JSON.parse(localStorage.getItem(\"durationMovieShortSave\")));\n      } else {\n        setSaveMovies(saveMovies);\n      }\n\n      setLoaded(false);\n    }, 450);\n    setCheckedSaveFilms(!checkedSaveFilms);\n  } // Выход\n\n\n  function handleSignOut() {\n    setLoggedIn(false);\n    setCurrentUser([]);\n    setCheckedFilms(false);\n    setCheckedSaveFilms(false);\n    localStorage.clear();\n    history.push(\"/\");\n  }\n\n  if (!permissonCheck) {\n    return null;\n  }\n\n  return /*#__PURE__*/_jsxDEV(CurrentUserContext.Provider, {\n    value: currentUser,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"app\",\n      children: /*#__PURE__*/_jsxDEV(Switch, {\n        children: [/*#__PURE__*/_jsxDEV(Route, {\n          exact: true,\n          path: \"/\",\n          children: /*#__PURE__*/_jsxDEV(Main, {\n            loggedIn: loggedIn\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 331,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 330,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ProtectedRoute, {\n          path: \"/movies\",\n          component: Movies,\n          loggedIn: loggedIn,\n          handleEnter: handleEnter,\n          loaded: loaded,\n          isFiltered: isFiltered,\n          movies: movies,\n          filterMovies: filterMovies,\n          handleSaveMovie: handleSaveMovie,\n          saveMovies: saveMovies,\n          handleDeleteSaveMovie: movie => handleDeleteSaveMovie(movie),\n          checkShortFilms: checkShortFilms,\n          onCheckedFilms: checkedFilms,\n          shortMovies: shortMovies,\n          pathMovies: pathMovies,\n          valueSearch: valueSearch\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 335,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ProtectedRoute, {\n          path: \"/saved-movies\",\n          component: SavedMovies,\n          loggedIn: loggedIn,\n          loaded: loaded,\n          handleSearchSaveMovie: handleSearchSaveMovie,\n          isFilteredSave: isFilteredSave,\n          saveMovies: saveMovies,\n          handleDeleteSaveMovie: handleDeleteSaveMovie,\n          saveFilterSaveMovies: saveFilterSaveMovies,\n          checkShortFilmsSave: checkShortFilmsSave,\n          onCheckedSaveFilms: checkedSaveFilms,\n          shortMovies: shortMoviesSave,\n          pathMoviesSave: pathMoviesSave\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 353,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ProtectedRoute, {\n          path: \"/profile\",\n          component: Profile,\n          onUpdateUser: handleUpdateUser,\n          handleSignOut: handleSignOut,\n          loggedIn: loggedIn\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 368,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(BlockRouteUser, {\n          path: \"/signin\",\n          component: Login,\n          handleAuthorization: handleAuthorization,\n          loggedIn: loggedIn,\n          isLoginMessage: isLoginMessage,\n          setLoginMessage: setLoginMessage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 375,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(BlockRouteUser, {\n          path: \"/signup\",\n          component: Register,\n          handleRegistration: handleRegistration,\n          loggedIn: loggedIn\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 383,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"*\",\n          component: NotFound\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 389,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 329,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 328,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 327,\n    columnNumber: 5\n  }, this);\n}\n\n_s(App, \"JpjIRxkpyS52kWXD47KexfaY6pk=\", false, function () {\n  return [useLocation, useHistory];\n});\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["useEffect","useState","Route","Switch","useLocation","useHistory","Main","Movies","SavedMovies","Register","Profile","Login","NotFound","CurrentUserContext","mainApi","auth","ProtectedRoute","moviesApi","BlockRouteUser","App","valueData","JSON","parse","localStorage","getItem","location","history","isLoginMessage","setLoginMessage","isRegisterMessage","setRegisterMessage","currentUser","setCurrentUser","loggedIn","setLoggedIn","movies","setMovies","filterMovies","setFilterMovies","saveMovies","setSaveMovies","saveFilterSaveMovies","setFilterSaveMovies","shortMovies","setShortMovies","shortMoviesSave","setShortMoviesSave","valueSearch","setValueSearch","loaded","setLoaded","isFiltered","setIsFiltered","isFilteredSave","setIsFilteredSave","checkedFilms","setCheckedFilms","checkedSaveFilms","setCheckedSaveFilms","permissonCheck","setPermissonCheck","pathMovies","pathname","pathMoviesSave","checkToken","token","examinationValidationToken","then","res","setItem","stringify","catch","err","handleSignOut","console","log","removeItem","setTimeout","Promise","all","getMovies","getAboutUser","getSaveMovies","user","userSaveMovie","filter","movie","owner","_id","before","slice","after","arrMovies","concat","handleEnter","search","moviesFilter","nameRU","toLowerCase","includes","window","handleSaveMovie","movieData","saveMovie","newMovie","handleSearchSaveMovie","moviesSaveFilter","handleDeleteSaveMovie","deleteMovie","id","newCardsArr","c","newSavedCardsArr","handleRegistration","name","email","password","register","handleAuthorization","push","status","emailLogin","passwordLogin","authorization","handleUpdateUser","editProfile","checkShortFilms","e","durationMovieShort","duration","durationMovieShortSearch","checkShortFilmsSave","durationMovieShortSave","durationMovieShortSaveSearch","clear"],"sources":["C:/Users/Михаил/dev/movies-explorer-frontend/src/components/App/App.js"],"sourcesContent":["import '../App/App.css';\r\nimport { useEffect, useState } from 'react';\r\nimport { Route, Switch, useLocation, useHistory } from 'react-router-dom';\r\n\r\nimport Main from '../Main/Main';\r\nimport Movies from '../Movies/Movies';\r\nimport SavedMovies from '../SavedMovies/SavedMovies';\r\nimport Register from '../Register/Register';\r\nimport Profile from '../Profile/Profile';\r\nimport Login from '../Login/Login';\r\nimport NotFound from \"../NotFound/NotFound\";\r\n\r\nimport { CurrentUserContext } from \"../context/CurrentUserContext\";\r\nimport mainApi from \"../../utils/MainApi\";\r\nimport * as auth from \"../../utils/auth\";\r\nimport ProtectedRoute from \"../ProtectedRoute/ProtectedRoute\";\r\nimport moviesApi from \"../../utils/MoviesApi\";\r\nimport BlockRouteUser from \"../BlockRouteUser/BlockRouteUser\";\r\n\r\nfunction App() {\r\n  const valueData = JSON.parse(localStorage.getItem(\"moviesSearchValue\"));\r\n  const location = useLocation();\r\n  const history = useHistory();\r\n  const [isLoginMessage, setLoginMessage] = useState(\"\");\r\n  const [isRegisterMessage, setRegisterMessage] = useState(false);\r\n  const [currentUser, setCurrentUser] = useState([]);\r\n  const [loggedIn, setLoggedIn] = useState(false);\r\n  const [movies, setMovies] = useState([]);\r\n  const [filterMovies, setFilterMovies] = useState([]);\r\n  const [saveMovies, setSaveMovies] = useState([]);\r\n  const [saveFilterSaveMovies, setFilterSaveMovies] = useState([]);\r\n  const [shortMovies, setShortMovies] = useState([]);\r\n  const [shortMoviesSave, setShortMoviesSave] = useState([]);\r\n  const [valueSearch, setValueSearch] = useState(valueData);\r\n  const [loaded, setLoaded] = useState(true);\r\n  const [isFiltered, setIsFiltered] = useState(false);\r\n  const [isFilteredSave, setIsFilteredSave] = useState(false);\r\n  const [checkedFilms, setCheckedFilms] = useState(false);\r\n  const [checkedSaveFilms, setCheckedSaveFilms] = useState(false);\r\n  const [permissonCheck, setPermissonCheck] = useState(false);\r\n  const pathMovies = location.pathname === \"/movies\";\r\n  const pathMoviesSave = location.pathname === \"/saved-movies\";\r\n\r\n  // проверка токенов авторизованных пользователей, вернувшихся в приложение\r\n  function checkToken() {\r\n    const token = localStorage.getItem(\"token\");\r\n    if (token) {\r\n      auth\r\n        .examinationValidationToken(token)\r\n        .then((res) => {\r\n          setCurrentUser(res);\r\n          setLoggedIn(true);\r\n          localStorage.setItem(\"user\", JSON.stringify(res));\r\n        })\r\n        .catch((err) => {\r\n          handleSignOut();\r\n          console.log(err);\r\n          localStorage.removeItem(\"token\");\r\n        });\r\n    }\r\n  }\r\n\r\n  // Загрузка данных пользователя и фильмов\r\n  useEffect(() => {\r\n    setLoaded(true);\r\n    setTimeout(() => {\r\n      if (loggedIn) {\r\n        Promise.all([\r\n          moviesApi.getMovies(),\r\n          mainApi.getAboutUser(),\r\n          mainApi.getSaveMovies(),\r\n        ])\r\n          .then(([movies, user, saveMovies]) => {\r\n            localStorage.setItem(\"user\", JSON.stringify(user));\r\n            setCurrentUser(JSON.parse(localStorage.getItem(\"user\")));\r\n            const userSaveMovie = saveMovies.filter(\r\n              (movie) => movie.owner === user._id\r\n            );\r\n            localStorage.setItem(\"saveMovies\", JSON.stringify(userSaveMovie));\r\n            const before = movies.slice(0, 23);\r\n            const after = movies.slice(24);\r\n            const arrMovies = before.concat(after);\r\n            localStorage.setItem(\"allMovies\", JSON.stringify(arrMovies));\r\n            setSaveMovies(JSON.parse(localStorage.getItem(\"saveMovies\")));\r\n            setMovies(JSON.parse(localStorage.getItem(\"allMovies\")));\r\n            setLoaded(false);\r\n          })\r\n          .catch((err) => {\r\n            console.log(err);\r\n          });\r\n      }\r\n    }, 1000);\r\n  }, [loggedIn]);\r\n\r\n  useEffect(() => {\r\n    const token = localStorage.getItem(\"token\");\r\n    if (!token) {\r\n      setPermissonCheck(true);\r\n      return;\r\n    }\r\n    checkToken();\r\n    setPermissonCheck(true);\r\n    setLoggedIn(true);\r\n    setCheckedFilms(JSON.parse(localStorage.getItem(\"checkedFilms\")));\r\n    setCheckedSaveFilms(JSON.parse(localStorage.getItem(\"checkedSaveFilms\")));\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    setFilterMovies(JSON.parse(localStorage.getItem(\"moviesSearch\")));\r\n    setIsFiltered(JSON.parse(localStorage.getItem(\"isFiltered\")));\r\n  }, []);\r\n\r\n  // Обновление короткометражек\r\n  useEffect(() => {\r\n    setShortMovies(JSON.parse(localStorage.getItem(\"durationMovieShort\")));\r\n    setShortMoviesSave(\r\n      JSON.parse(localStorage.getItem(\"durationMovieShortSave\"))\r\n    );\r\n  }, []);\r\n\r\n  // Поиск фильмов\r\n  function handleEnter(search) {\r\n    const moviesFilter = movies\r\n      ? movies.filter((movie) => {\r\n          return movie.nameRU.toLowerCase().includes(search.toLowerCase());\r\n        })\r\n      : [];\r\n    localStorage.setItem(\"moviesSearch\", JSON.stringify(moviesFilter));\r\n    localStorage.setItem(\"isFiltered\", JSON.stringify(true));\r\n    localStorage.setItem(\"moviesSearchValue\", JSON.stringify(search));\r\n    setTimeout(() => {\r\n      setLoaded(false);\r\n      setFilterMovies(JSON.parse(localStorage.getItem(\"moviesSearch\")));\r\n      setIsFiltered(JSON.parse(localStorage.getItem(\"isFiltered\")));\r\n      setValueSearch(\r\n        JSON.parse(window.localStorage.getItem(\"moviesSearchValue\"))\r\n      );\r\n    }, 450);\r\n  }\r\n\r\n  // Сохранение фильма\r\n  function handleSaveMovie(movieData) {\r\n    setSaveMovies([...saveMovies, movieData]);\r\n    mainApi\r\n      .saveMovie(movieData)\r\n      .then((newMovie) => {\r\n        setSaveMovies([...saveMovies, newMovie]);\r\n        localStorage.setItem(\r\n          \"saveMovies\",\r\n          JSON.stringify([...saveMovies, newMovie])\r\n        );\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  }\r\n\r\n  // Поиск сохраненных фильмов\r\n  function handleSearchSaveMovie(search) {\r\n    const moviesSaveFilter = saveMovies\r\n      ? saveMovies.filter((movie) => {\r\n          return movie.nameRU.toLowerCase().includes(search.toLowerCase());\r\n        })\r\n      : [];\r\n    localStorage.setItem(\"isFilteredSave\", JSON.stringify(true));\r\n    setTimeout(() => {\r\n      setLoaded(false);\r\n      setFilterSaveMovies(moviesSaveFilter);\r\n      setIsFilteredSave(JSON.parse(localStorage.getItem(\"isFilteredSave\")));\r\n    }, 450);\r\n  }\r\n\r\n  // Функция удаления из избранного\r\n  function handleDeleteSaveMovie(saveMovie) {\r\n    mainApi\r\n      .deleteMovie(saveMovie._id || saveMovie.id)\r\n      .then(() => {\r\n        const newCardsArr = saveMovies.filter((c) => c._id !== saveMovie._id);\r\n        const newSavedCardsArr = saveMovies.filter(\r\n          (c) => c._id !== saveMovie._id\r\n        );\r\n        setSaveMovies(newCardsArr);\r\n        setFilterSaveMovies(newSavedCardsArr);\r\n        localStorage.removeItem(\"saveMovies\", JSON.stringify(newCardsArr));\r\n        localStorage.removeItem(\"saveMovies\", JSON.stringify(newSavedCardsArr));\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  }\r\n\r\n  // Регистрация\r\n  function handleRegistration(name, email, password) {\r\n    auth\r\n      .register(name, email, password)\r\n      .then((res) => {\r\n        if (res) {\r\n          handleAuthorization(email, password);\r\n          history.push(\"/movies\");\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        err.status !== 400\r\n          ? setRegisterMessage(\"Пользователь с таким email уже зарегистрирован\")\r\n          : setRegisterMessage(\r\n              \"При регистрации пользователя произошла ошибка.\"\r\n            );\r\n        console.log(err);\r\n      });\r\n  }\r\n\r\n  // Авторизация\r\n  function handleAuthorization(emailLogin, passwordLogin) {\r\n    auth\r\n      .authorization(emailLogin, passwordLogin)\r\n      .then((res) => {\r\n        if (res) {\r\n          localStorage.setItem(\"token\", res.token);\r\n          localStorage.setItem(\"moviesSearch\", JSON.stringify(filterMovies));\r\n          window.localStorage.setItem(\r\n            \"moviesSearchValue\",\r\n            JSON.stringify(valueSearch)\r\n          );\r\n          setLoggedIn(true);\r\n          history.push(\"/movies\");\r\n        }\r\n      })\r\n      .then(() => {\r\n        checkToken();\r\n      })\r\n      .catch((err) => {\r\n        setLoginMessage(\"Вы ввели неправильный логин или пароль.\");\r\n        console.log(err);\r\n      });\r\n  }\r\n\r\n  // Обновление пользователя\r\n  function handleUpdateUser(user) {\r\n    mainApi\r\n      .editProfile(user)\r\n      .then((user) => {\r\n        setCurrentUser(user);\r\n        localStorage.setItem(\"user\", JSON.stringify(user));\r\n      })\r\n      .catch((err) => {\r\n        console.log(`Внимание! ${err}`);\r\n      });\r\n  }\r\n\r\n  // Короткометражки фильмов\r\n  function checkShortFilms(e) {\r\n    setLoaded(true);\r\n    localStorage.setItem(\"checkedFilms\", JSON.stringify(!checkedFilms));\r\n    setTimeout(() => {\r\n      if (!checkedFilms) {\r\n        const durationMovieShort = movies.filter(\r\n          (movie) => movie.duration <= 40\r\n        );\r\n        const durationMovieShortSearch = filterMovies.filter(\r\n          (movie) => movie.duration <= 40\r\n        );\r\n        localStorage.setItem(\r\n          \"durationMovieShort\",\r\n          JSON.stringify(durationMovieShort)\r\n        );\r\n        localStorage.setItem(\r\n          \"durationMovieShort\",\r\n          JSON.stringify(durationMovieShortSearch)\r\n        );\r\n        setShortMovies(JSON.parse(localStorage.getItem(\"durationMovieShort\")));\r\n      } else {\r\n        setMovies(movies);\r\n      }\r\n      setLoaded(false);\r\n    }, 450);\r\n    setCheckedFilms(!checkedFilms);\r\n  }\r\n\r\n  // Короткометражки сохраненных фильмов\r\n  function checkShortFilmsSave(e) {\r\n    setLoaded(true);\r\n    localStorage.setItem(\"checkedSaveFilms\", JSON.stringify(!checkedSaveFilms));\r\n    setTimeout(() => {\r\n      if (!checkedSaveFilms) {\r\n        const durationMovieShortSave = saveMovies.filter(\r\n          (movie) => movie.duration <= 40\r\n        );\r\n\r\n        const durationMovieShortSaveSearch = saveFilterSaveMovies.filter(\r\n          (movie) => movie.duration <= 40\r\n        );\r\n\r\n        localStorage.setItem(\r\n          \"durationMovieShortSave\",\r\n          JSON.stringify(durationMovieShortSave)\r\n        );\r\n        localStorage.setItem(\r\n          \"durationMovieShortSaveSearch\",\r\n          JSON.stringify(durationMovieShortSaveSearch)\r\n        );\r\n        setShortMoviesSave(\r\n          JSON.parse(localStorage.getItem(\"durationMovieShortSave\"))\r\n        );\r\n      } else {\r\n        setSaveMovies(saveMovies);\r\n      }\r\n      setLoaded(false);\r\n    }, 450);\r\n    setCheckedSaveFilms(!checkedSaveFilms);\r\n  }\r\n\r\n  // Выход\r\n  function handleSignOut() {\r\n    setLoggedIn(false);\r\n    setCurrentUser([]);\r\n    setCheckedFilms(false);\r\n    setCheckedSaveFilms(false);\r\n    localStorage.clear();\r\n    history.push(\"/\");\r\n  }\r\n\r\n  if (!permissonCheck) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <CurrentUserContext.Provider value={currentUser}>\r\n      <div className=\"app\">\r\n        <Switch>\r\n          <Route exact path=\"/\">\r\n            <Main\r\n              loggedIn={loggedIn}\r\n            />\r\n          </Route>\r\n          <ProtectedRoute\r\n            path=\"/movies\"\r\n            component={Movies}\r\n            loggedIn={loggedIn}\r\n            handleEnter={handleEnter}\r\n            loaded={loaded}\r\n            isFiltered={isFiltered}\r\n            movies={movies}\r\n            filterMovies={filterMovies}\r\n            handleSaveMovie={handleSaveMovie}\r\n            saveMovies={saveMovies}\r\n            handleDeleteSaveMovie={(movie) => handleDeleteSaveMovie(movie)}\r\n            checkShortFilms={checkShortFilms}\r\n            onCheckedFilms={checkedFilms}\r\n            shortMovies={shortMovies}\r\n            pathMovies={pathMovies}\r\n            valueSearch={valueSearch}\r\n          />\r\n          <ProtectedRoute\r\n            path=\"/saved-movies\"\r\n            component={SavedMovies}\r\n            loggedIn={loggedIn}\r\n            loaded={loaded}\r\n            handleSearchSaveMovie={handleSearchSaveMovie}\r\n            isFilteredSave={isFilteredSave}\r\n            saveMovies={saveMovies}\r\n            handleDeleteSaveMovie={handleDeleteSaveMovie}\r\n            saveFilterSaveMovies={saveFilterSaveMovies}\r\n            checkShortFilmsSave={checkShortFilmsSave}\r\n            onCheckedSaveFilms={checkedSaveFilms}\r\n            shortMovies={shortMoviesSave}\r\n            pathMoviesSave={pathMoviesSave}\r\n          />\r\n          <ProtectedRoute\r\n            path=\"/profile\"\r\n            component={Profile}\r\n            onUpdateUser={handleUpdateUser}\r\n            handleSignOut={handleSignOut}\r\n            loggedIn={loggedIn}\r\n          />\r\n          <BlockRouteUser\r\n            path=\"/signin\"\r\n            component={Login}\r\n            handleAuthorization={handleAuthorization}\r\n            loggedIn={loggedIn}\r\n            isLoginMessage={isLoginMessage}\r\n            setLoginMessage={setLoginMessage}\r\n          />\r\n          <BlockRouteUser\r\n            path=\"/signup\"\r\n            component={Register}\r\n            handleRegistration={handleRegistration}\r\n            loggedIn={loggedIn}\r\n          />\r\n          <Route path=\"*\" component={NotFound} />\r\n        </Switch>\r\n      </div>\r\n    </CurrentUserContext.Provider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}