{"ast":null,"code":"import _classCallCheck from\"C:/Users/\\u041C\\u0438\\u0445\\u0430\\u0438\\u043B/dev/movies-explorer-frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/\\u041C\\u0438\\u0445\\u0430\\u0438\\u043B/dev/movies-explorer-frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";var MainApi=/*#__PURE__*/function(){function MainApi(_ref){var address=_ref.address;_classCallCheck(this,MainApi);this.address=address;}_createClass(MainApi,[{key:\"_getResponseData\",value:function _getResponseData(res){return res.ok?res.json():Promise.reject(new Error(\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430: \".concat(res.status)));}},{key:\"getSaveMovies\",value:function getSaveMovies(){return fetch(\"\".concat(this.address,\"/movies\"),{method:\"GET\",headers:{\"Content-Type\":\"application/json\",authorization:this.getToken()}}).then(this._getResponseData);}},{key:\"getAboutUser\",value:function getAboutUser(){return fetch(\"\".concat(this.address,\"/users/me\"),{method:\"GET\",headers:{\"Content-Type\":\"application/json\",authorization:this.getToken()}}).then(this._getResponseData);}},{key:\"editProfile\",value:function editProfile(data){return fetch(\"\".concat(this.address,\"/users/me\"),{method:\"PATCH\",headers:{\"Content-Type\":\"application/json\",authorization:this.getToken()},body:JSON.stringify({name:data.name,email:data.email})}).then(this._getResponseData);}},{key:\"saveMovie\",value:function saveMovie(movieData){return fetch(\"\".concat(this.address,\"/movies\"),{method:\"POST\",headers:{\"Content-Type\":\"application/json\",authorization:this.getToken()},body:JSON.stringify(movieData)}).then(this._getResponseData);}},{key:\"deleteMovie\",value:function deleteMovie(dataId){return fetch(\"\".concat(this.address,\"/movies/\").concat(dataId),{method:\"DELETE\",headers:{\"Content-Type\":\"application/json\",authorization:this.getToken()}}).then(this._getResponseData);}},{key:\"getToken\",value:function getToken(){return\"Bearer \".concat(localStorage.getItem(\"token\"));}}]);return MainApi;}();var mainApi=new MainApi({address:\"https://api.diploma.mikhail.nomoredomains.sbs\"});export default mainApi;","map":{"version":3,"names":["MainApi","address","res","ok","json","Promise","reject","Error","status","fetch","method","headers","authorization","getToken","then","_getResponseData","data","body","JSON","stringify","name","email","movieData","dataId","localStorage","getItem","mainApi"],"sources":["C:/Users/Михаил/dev/movies-explorer-frontend/src/utils/MainApi.js"],"sourcesContent":["class MainApi {\r\n    constructor({ address }) {\r\n      this.address = address;\r\n    }\r\n  \r\n    _getResponseData(res) {\r\n      return res.ok\r\n        ? res.json()\r\n        : Promise.reject(new Error(`Ошибка: ${res.status}`));\r\n    }\r\n  \r\n    getSaveMovies() {\r\n      return fetch(`${this.address}/movies`, {\r\n        method: \"GET\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          authorization: this.getToken(),\r\n        },\r\n      }).then(this._getResponseData);\r\n    }\r\n  \r\n    getAboutUser() {\r\n      return fetch(`${this.address}/users/me`, {\r\n        method: \"GET\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          authorization: this.getToken(),\r\n        },\r\n      }).then(this._getResponseData);\r\n    }\r\n  \r\n    editProfile(data) {\r\n      return fetch(`${this.address}/users/me`, {\r\n        method: \"PATCH\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          authorization: this.getToken(),\r\n        },\r\n        body: JSON.stringify({\r\n          name: data.name,\r\n          email: data.email,\r\n        }),\r\n      }).then(this._getResponseData);\r\n    }\r\n  \r\n    saveMovie(movieData) {\r\n      return fetch(`${this.address}/movies`, {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          authorization: this.getToken(),\r\n        },\r\n        body: JSON.stringify(movieData),\r\n      }).then(this._getResponseData);\r\n    }\r\n  \r\n    deleteMovie(dataId) {\r\n      return fetch(`${this.address}/movies/${dataId}`, {\r\n        method: \"DELETE\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          authorization: this.getToken(),\r\n        },\r\n      }).then(this._getResponseData);\r\n    }\r\n    getToken() {\r\n      return `Bearer ${localStorage.getItem(\"token\")}`;\r\n    }\r\n  }\r\n  \r\n  const mainApi = new MainApi({\r\n    address: \"https://api.diploma.mikhail.nomoredomains.sbs\",\r\n  });\r\n  \r\n  export default mainApi;"],"mappings":"iUAAMA,Q,yBACF,sBAAyB,IAAXC,QAAW,MAAXA,OAAW,+BACvB,KAAKA,OAAL,CAAeA,OAAf,CACD,C,oDAED,0BAAiBC,GAAjB,CAAsB,CACpB,MAAOA,IAAG,CAACC,EAAJ,CACHD,GAAG,CAACE,IAAJ,EADG,CAEHC,OAAO,CAACC,MAAR,CAAe,GAAIC,MAAJ,iDAAqBL,GAAG,CAACM,MAAzB,EAAf,CAFJ,CAGD,C,6BAED,wBAAgB,CACd,MAAOC,MAAK,WAAI,KAAKR,OAAT,YAA2B,CACrCS,MAAM,CAAE,KAD6B,CAErCC,OAAO,CAAE,CACP,eAAgB,kBADT,CAEPC,aAAa,CAAE,KAAKC,QAAL,EAFR,CAF4B,CAA3B,CAAL,CAMJC,IANI,CAMC,KAAKC,gBANN,CAAP,CAOD,C,4BAED,uBAAe,CACb,MAAON,MAAK,WAAI,KAAKR,OAAT,cAA6B,CACvCS,MAAM,CAAE,KAD+B,CAEvCC,OAAO,CAAE,CACP,eAAgB,kBADT,CAEPC,aAAa,CAAE,KAAKC,QAAL,EAFR,CAF8B,CAA7B,CAAL,CAMJC,IANI,CAMC,KAAKC,gBANN,CAAP,CAOD,C,2BAED,qBAAYC,IAAZ,CAAkB,CAChB,MAAOP,MAAK,WAAI,KAAKR,OAAT,cAA6B,CACvCS,MAAM,CAAE,OAD+B,CAEvCC,OAAO,CAAE,CACP,eAAgB,kBADT,CAEPC,aAAa,CAAE,KAAKC,QAAL,EAFR,CAF8B,CAMvCI,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CACnBC,IAAI,CAAEJ,IAAI,CAACI,IADQ,CAEnBC,KAAK,CAAEL,IAAI,CAACK,KAFO,CAAf,CANiC,CAA7B,CAAL,CAUJP,IAVI,CAUC,KAAKC,gBAVN,CAAP,CAWD,C,yBAED,mBAAUO,SAAV,CAAqB,CACnB,MAAOb,MAAK,WAAI,KAAKR,OAAT,YAA2B,CACrCS,MAAM,CAAE,MAD6B,CAErCC,OAAO,CAAE,CACP,eAAgB,kBADT,CAEPC,aAAa,CAAE,KAAKC,QAAL,EAFR,CAF4B,CAMrCI,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAeG,SAAf,CAN+B,CAA3B,CAAL,CAOJR,IAPI,CAOC,KAAKC,gBAPN,CAAP,CAQD,C,2BAED,qBAAYQ,MAAZ,CAAoB,CAClB,MAAOd,MAAK,WAAI,KAAKR,OAAT,oBAA2BsB,MAA3B,EAAqC,CAC/Cb,MAAM,CAAE,QADuC,CAE/CC,OAAO,CAAE,CACP,eAAgB,kBADT,CAEPC,aAAa,CAAE,KAAKC,QAAL,EAFR,CAFsC,CAArC,CAAL,CAMJC,IANI,CAMC,KAAKC,gBANN,CAAP,CAOD,C,wBACD,mBAAW,CACT,uBAAiBS,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAjB,EACD,C,uBAGH,GAAMC,QAAO,CAAG,GAAI1B,QAAJ,CAAY,CAC1BC,OAAO,CAAE,+CADiB,CAAZ,CAAhB,CAIA,cAAeyB,QAAf"},"metadata":{},"sourceType":"module"}