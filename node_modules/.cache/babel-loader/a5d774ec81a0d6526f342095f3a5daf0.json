{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\\\u041C\\u0438\\u0445\\u0430\\u0438\\u043B\\\\dev\\\\movies-explorer-frontend\\\\src\\\\components\\\\App\\\\App.js\",\n    _s = $RefreshSig$();\n\nimport '../App/App.css';\nimport { useEffect, useState } from 'react';\nimport { Route, Switch, useLocation, useHistory, useNavigate } from 'react-router-dom';\nimport Main from '../Main/Main';\nimport Movies from '../Movies/Movies';\nimport SavedMovies from '../SavedMovies/SavedMovies';\nimport Register from '../Register/Register';\nimport Profile from '../Profile/Profile';\nimport Login from '../Login/Login';\nimport NotFound from \"../NotFound/NotFound\";\nimport { CurrentUserContext } from \"../context/CurrentUserContext\";\nimport mainApi from \"../../utils/MainApi\";\nimport * as auth from \"../../utils/auth\";\nimport ProtectedRoute from \"../ProtectedRoute/ProtectedRoute\";\nimport moviesApi from \"../../utils/MoviesApi\";\nimport BlockRouteUser from \"../BlockRouteUser/BlockRouteUser\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction App() {\n  _s();\n\n  const valueData = JSON.parse(localStorage.getItem(\"moviesSearchValue\"));\n  const location = useLocation(); // const history = useHistory();\n\n  const navigate = useNavigate();\n  const [currentUser, setCurrentUser] = useState([]);\n  const [loggedIn, setLoggedIn] = useState(false);\n  const [movies, setMovies] = useState([]);\n  const [filterMovies, setFilterMovies] = useState([]);\n  const [saveMovies, setSaveMovies] = useState([]);\n  const [saveFilterSaveMovies, setFilterSaveMovies] = useState([]);\n  const [shortMovies, setShortMovies] = useState([]);\n  const [shortMoviesSave, setShortMoviesSave] = useState([]);\n  const [valueSearch, setValueSearch] = useState(valueData);\n  const [loaded, setLoaded] = useState(true);\n  const [isFiltered, setIsFiltered] = useState(false);\n  const [isFilteredSave, setIsFilteredSave] = useState(false);\n  const [checkedFilms, setCheckedFilms] = useState(false);\n  const [checkedSaveFilms, setCheckedSaveFilms] = useState(false);\n  const [permissonCheck, setPermissonCheck] = useState(false);\n  const pathMovies = location.pathname === \"/movies\";\n  const pathMoviesSave = location.pathname === \"/saved-movies\"; // проверка токенов авторизованных пользователей, вернувшихся в приложение\n\n  function checkToken() {\n    const token = localStorage.getItem(\"token\");\n\n    if (token) {\n      auth.examinationValidationToken(token).then(res => {\n        setCurrentUser(res);\n        setLoggedIn(true);\n        localStorage.setItem(\"user\", JSON.stringify(res));\n      }).catch(err => {\n        console.log(err);\n        localStorage.removeItem(\"token\");\n      });\n    }\n  } // Загрузка данных пользователя и фильмов\n\n\n  useEffect(() => {\n    setLoaded(true);\n    setTimeout(() => {\n      if (loggedIn) {\n        Promise.all([moviesApi.getMovies(), mainApi.getAboutUser(), mainApi.getSaveMovies()]).then(_ref => {\n          let [movies, user, saveMovies] = _ref;\n          localStorage.setItem(\"user\", JSON.stringify(user));\n          setCurrentUser(JSON.parse(localStorage.getItem(\"user\")));\n          const userSaveMovie = saveMovies.filter(movie => movie.owner === user._id);\n          localStorage.setItem(\"saveMovies\", JSON.stringify(userSaveMovie));\n          localStorage.setItem(\"movies\", JSON.stringify(movies));\n          setSaveMovies(JSON.parse(localStorage.getItem(\"saveMovies\")));\n          setMovies(JSON.parse(localStorage.getItem(\"movies\")));\n          setLoaded(false);\n        }).catch(err => {\n          console.log(err);\n        });\n      }\n    }, 1000);\n  }, [loggedIn]);\n  useEffect(() => {\n    const token = localStorage.getItem(\"token\");\n\n    if (!token) {\n      setPermissonCheck(true);\n      return;\n    }\n\n    checkToken();\n    setPermissonCheck(true);\n    setLoggedIn(true);\n    setCheckedFilms(JSON.parse(localStorage.getItem(\"checkedFilms\")));\n    setCheckedSaveFilms(JSON.parse(localStorage.getItem(\"checkedSaveFilms\")));\n  }, []);\n  useEffect(() => {\n    setFilterMovies(JSON.parse(localStorage.getItem(\"moviesSearch\")));\n    setIsFiltered(JSON.parse(localStorage.getItem(\"isFiltered\")));\n  }, []); // Обновление короткометражек\n\n  useEffect(() => {\n    setShortMovies(JSON.parse(localStorage.getItem(\"durationMovieShort\")));\n    setShortMoviesSave(JSON.parse(localStorage.getItem(\"durationMovieShortSave\")));\n  }, []); // Поиск фильмов\n\n  function handleEnter(search) {\n    const moviesFilter = movies ? movies.filter(movie => {\n      return movie.nameRU.toLowerCase().includes(search.toLowerCase());\n    }) : [];\n    localStorage.setItem(\"moviesSearch\", JSON.stringify(moviesFilter));\n    localStorage.setItem(\"isFiltered\", JSON.stringify(true));\n    localStorage.setItem(\"moviesSearchValue\", JSON.stringify(search));\n    setTimeout(() => {\n      setLoaded(false);\n      setFilterMovies(JSON.parse(localStorage.getItem(\"moviesSearch\")));\n      setIsFiltered(JSON.parse(localStorage.getItem(\"isFiltered\")));\n      setValueSearch(JSON.parse(window.localStorage.getItem(\"moviesSearchValue\")));\n    }, 450);\n  } // Сохранение фильма\n\n\n  function handleSaveMovie(movieData) {\n    setSaveMovies([...saveMovies, movieData]);\n    mainApi.saveMovie(movieData).then(newMovie => {\n      setSaveMovies([...saveMovies, newMovie]);\n      localStorage.setItem(\"saveMovies\", JSON.stringify([...saveMovies, newMovie]));\n    }).catch(err => {\n      console.log(err);\n    });\n  } // Поиск сохраненных фильмов\n\n\n  function handleSearchSaveMovie(search) {\n    const moviesSaveFilter = saveMovies ? saveMovies.filter(movie => {\n      return movie.nameRU.toLowerCase().includes(search.toLowerCase());\n    }) : [];\n    localStorage.setItem(\"isFilteredSave\", JSON.stringify(true));\n    setTimeout(() => {\n      setLoaded(false);\n      setFilterSaveMovies(moviesSaveFilter);\n      setIsFilteredSave(JSON.parse(localStorage.getItem(\"isFilteredSave\")));\n    }, 450);\n  } // Функция удаления из избранного\n\n\n  function handleDeleteSaveMovie(saveMovie) {\n    mainApi.deleteMovie(saveMovie._id || saveMovie.id).then(() => {\n      const newCardsArr = saveMovies.filter(c => c._id !== saveMovie._id);\n      const newSavedCardsArr = saveMovies.filter(c => c._id !== saveMovie._id);\n      setSaveMovies(newCardsArr);\n      setFilterSaveMovies(newSavedCardsArr);\n      localStorage.removeItem(\"saveMovies\", JSON.stringify(newCardsArr));\n      localStorage.removeItem(\"saveMovies\", JSON.stringify(newSavedCardsArr));\n    }).catch(err => {\n      console.log(err);\n    });\n  } // Регистрация\n\n\n  function handleRegistration(name, email, password) {\n    auth.register(name, email, password).then(res => {\n      if (res) {\n        handleAuthorization(email, password); // history.push(\"/movies\");\n\n        navigate('/movies');\n      }\n    }).catch(err => {\n      console.log(err);\n    });\n  } // Авторизация\n\n\n  function handleAuthorization(emailLogin, passwordLogin) {\n    auth.authorization(emailLogin, passwordLogin).then(res => {\n      if (res) {\n        localStorage.setItem(\"token\", res.token);\n        localStorage.setItem(\"moviesSearch\", JSON.stringify(filterMovies));\n        window.localStorage.setItem(\"moviesSearchValue\", JSON.stringify(valueSearch));\n        setLoggedIn(true);\n        history.push(\"/movies\");\n      }\n    }).then(() => {\n      checkToken();\n    }).catch(err => {\n      console.log(err);\n    });\n  } // Обновление пользователя\n\n\n  function handleUpdateUser(user) {\n    mainApi.editProfile(user).then(user => {\n      setCurrentUser(user);\n      localStorage.setItem(\"user\", JSON.stringify(user));\n    }).catch(err => {\n      console.log(`Внимание! ${err}`);\n    });\n  } // Короткометражки фильмов\n\n\n  function checkShortFilms(e) {\n    setLoaded(true);\n    localStorage.setItem(\"checkedFilms\", JSON.stringify(!checkedFilms));\n    setTimeout(() => {\n      if (!checkedFilms) {\n        const durationMovieShort = movies.filter(movie => movie.duration <= 40);\n        const durationMovieShortSearch = filterMovies.filter(movie => movie.duration <= 40);\n        localStorage.setItem(\"durationMovieShort\", JSON.stringify(durationMovieShort));\n        localStorage.setItem(\"durationMovieShort\", JSON.stringify(durationMovieShortSearch));\n        setShortMovies(JSON.parse(localStorage.getItem(\"durationMovieShort\")));\n      } else {\n        setMovies(movies);\n      }\n\n      setLoaded(false);\n    }, 450);\n    setCheckedFilms(!checkedFilms);\n  } // Короткометражки сохраненных фильмов\n\n\n  function checkShortFilmsSave(e) {\n    setLoaded(true);\n    localStorage.setItem(\"checkedSaveFilms\", JSON.stringify(!checkedSaveFilms));\n    setTimeout(() => {\n      if (!checkedSaveFilms) {\n        const durationMovieShortSave = saveMovies.filter(movie => movie.duration <= 40);\n        const durationMovieShortSaveSearch = saveFilterSaveMovies.filter(movie => movie.duration <= 40);\n        localStorage.setItem(\"durationMovieShortSave\", JSON.stringify(durationMovieShortSave));\n        localStorage.setItem(\"durationMovieShortSaveSearch\", JSON.stringify(durationMovieShortSaveSearch));\n        setShortMoviesSave(JSON.parse(localStorage.getItem(\"durationMovieShortSave\")));\n      } else {\n        setSaveMovies(saveMovies);\n      }\n\n      setLoaded(false);\n    }, 450);\n    setCheckedSaveFilms(!checkedSaveFilms);\n  } // Выход\n\n\n  function handleSignOut() {\n    setLoggedIn(false);\n    setCurrentUser([]);\n    setCheckedFilms(false);\n    setCheckedSaveFilms(false);\n    localStorage.clear();\n    history.push(\"/\");\n  }\n\n  if (!permissonCheck) {\n    return null;\n  }\n\n  return /*#__PURE__*/_jsxDEV(CurrentUserContext.Provider, {\n    value: currentUser,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"app\",\n      children: /*#__PURE__*/_jsxDEV(Switch, {\n        children: [/*#__PURE__*/_jsxDEV(Route, {\n          exact: true,\n          path: \"/\",\n          component: Main\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 320,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ProtectedRoute, {\n          path: \"/movies\",\n          component: Movies,\n          loggedIn: loggedIn,\n          handleEnter: handleEnter,\n          loaded: loaded,\n          isFiltered: isFiltered,\n          movies: movies,\n          filterMovies: filterMovies,\n          handleSaveMovie: handleSaveMovie,\n          saveMovies: saveMovies,\n          handleDeleteSaveMovie: movie => handleDeleteSaveMovie(movie),\n          checkShortFilms: checkShortFilms,\n          onCheckedFilms: checkedFilms,\n          shortMovies: shortMovies,\n          pathMovies: pathMovies,\n          valueSearch: valueSearch\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 321,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ProtectedRoute, {\n          path: \"/saved-movies\",\n          component: SavedMovies,\n          loggedIn: loggedIn,\n          loaded: loaded,\n          handleSearchSaveMovie: handleSearchSaveMovie,\n          isFilteredSave: isFilteredSave,\n          saveMovies: saveMovies,\n          handleDeleteSaveMovie: handleDeleteSaveMovie,\n          saveFilterSaveMovies: saveFilterSaveMovies,\n          checkShortFilmsSave: checkShortFilmsSave,\n          onCheckedSaveFilms: checkedSaveFilms,\n          shortMovies: shortMoviesSave,\n          pathMoviesSave: pathMoviesSave\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 339,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ProtectedRoute, {\n          path: \"/profile\",\n          component: Profile,\n          onUpdateUser: handleUpdateUser,\n          handleSignOut: handleSignOut,\n          loggedIn: loggedIn\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 354,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(BlockRouteUser, {\n          path: \"/signin\",\n          component: Login,\n          handleAuthorization: handleAuthorization,\n          loggedIn: loggedIn\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 361,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(BlockRouteUser, {\n          path: \"/signup\",\n          component: Register,\n          handleRegistration: handleRegistration,\n          loggedIn: loggedIn\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 367,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"*\",\n          component: NotFound\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 373,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 319,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 318,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 317,\n    columnNumber: 5\n  }, this);\n}\n\n_s(App, \"XvFcFMas73NfVj48w3FbBWoZ2Bs=\", false, function () {\n  return [useLocation, useNavigate];\n});\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["useEffect","useState","Route","Switch","useLocation","useHistory","useNavigate","Main","Movies","SavedMovies","Register","Profile","Login","NotFound","CurrentUserContext","mainApi","auth","ProtectedRoute","moviesApi","BlockRouteUser","App","valueData","JSON","parse","localStorage","getItem","location","navigate","currentUser","setCurrentUser","loggedIn","setLoggedIn","movies","setMovies","filterMovies","setFilterMovies","saveMovies","setSaveMovies","saveFilterSaveMovies","setFilterSaveMovies","shortMovies","setShortMovies","shortMoviesSave","setShortMoviesSave","valueSearch","setValueSearch","loaded","setLoaded","isFiltered","setIsFiltered","isFilteredSave","setIsFilteredSave","checkedFilms","setCheckedFilms","checkedSaveFilms","setCheckedSaveFilms","permissonCheck","setPermissonCheck","pathMovies","pathname","pathMoviesSave","checkToken","token","examinationValidationToken","then","res","setItem","stringify","catch","err","console","log","removeItem","setTimeout","Promise","all","getMovies","getAboutUser","getSaveMovies","user","userSaveMovie","filter","movie","owner","_id","handleEnter","search","moviesFilter","nameRU","toLowerCase","includes","window","handleSaveMovie","movieData","saveMovie","newMovie","handleSearchSaveMovie","moviesSaveFilter","handleDeleteSaveMovie","deleteMovie","id","newCardsArr","c","newSavedCardsArr","handleRegistration","name","email","password","register","handleAuthorization","emailLogin","passwordLogin","authorization","history","push","handleUpdateUser","editProfile","checkShortFilms","e","durationMovieShort","duration","durationMovieShortSearch","checkShortFilmsSave","durationMovieShortSave","durationMovieShortSaveSearch","handleSignOut","clear"],"sources":["C:/Users/Михаил/dev/movies-explorer-frontend/src/components/App/App.js"],"sourcesContent":["import '../App/App.css';\r\nimport { useEffect, useState } from 'react';\r\nimport { Route, Switch, useLocation, useHistory, useNavigate } from 'react-router-dom';\r\n\r\nimport Main from '../Main/Main';\r\nimport Movies from '../Movies/Movies';\r\nimport SavedMovies from '../SavedMovies/SavedMovies';\r\nimport Register from '../Register/Register';\r\nimport Profile from '../Profile/Profile';\r\nimport Login from '../Login/Login';\r\nimport NotFound from \"../NotFound/NotFound\";\r\n\r\nimport { CurrentUserContext } from \"../context/CurrentUserContext\";\r\nimport mainApi from \"../../utils/MainApi\";\r\nimport * as auth from \"../../utils/auth\";\r\nimport ProtectedRoute from \"../ProtectedRoute/ProtectedRoute\";\r\nimport moviesApi from \"../../utils/MoviesApi\";\r\nimport BlockRouteUser from \"../BlockRouteUser/BlockRouteUser\";\r\n\r\nfunction App() {\r\n  const valueData = JSON.parse(localStorage.getItem(\"moviesSearchValue\"));\r\n  const location = useLocation();\r\n  // const history = useHistory();\r\n  const navigate = useNavigate();\r\n  const [currentUser, setCurrentUser] = useState([]);\r\n  const [loggedIn, setLoggedIn] = useState(false);\r\n  const [movies, setMovies] = useState([]);\r\n  const [filterMovies, setFilterMovies] = useState([]);\r\n  const [saveMovies, setSaveMovies] = useState([]);\r\n  const [saveFilterSaveMovies, setFilterSaveMovies] = useState([]);\r\n  const [shortMovies, setShortMovies] = useState([]);\r\n  const [shortMoviesSave, setShortMoviesSave] = useState([]);\r\n  const [valueSearch, setValueSearch] = useState(valueData);\r\n  const [loaded, setLoaded] = useState(true);\r\n  const [isFiltered, setIsFiltered] = useState(false);\r\n  const [isFilteredSave, setIsFilteredSave] = useState(false);\r\n  const [checkedFilms, setCheckedFilms] = useState(false);\r\n  const [checkedSaveFilms, setCheckedSaveFilms] = useState(false);\r\n  const [permissonCheck, setPermissonCheck] = useState(false);\r\n  const pathMovies = location.pathname === \"/movies\";\r\n  const pathMoviesSave = location.pathname === \"/saved-movies\";\r\n\r\n  // проверка токенов авторизованных пользователей, вернувшихся в приложение\r\n  function checkToken() {\r\n    const token = localStorage.getItem(\"token\");\r\n    if (token) {\r\n      auth\r\n        .examinationValidationToken(token)\r\n        .then((res) => {\r\n          setCurrentUser(res);\r\n          setLoggedIn(true);\r\n          localStorage.setItem(\"user\", JSON.stringify(res));\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n          localStorage.removeItem(\"token\");\r\n        });\r\n    }\r\n  }\r\n\r\n  // Загрузка данных пользователя и фильмов\r\n  useEffect(() => {\r\n    setLoaded(true);\r\n    setTimeout(() => {\r\n      if (loggedIn) {\r\n        Promise.all([\r\n          moviesApi.getMovies(),\r\n          mainApi.getAboutUser(),\r\n          mainApi.getSaveMovies(),\r\n        ])\r\n          .then(([movies, user, saveMovies]) => {\r\n            localStorage.setItem(\"user\", JSON.stringify(user));\r\n            setCurrentUser(JSON.parse(localStorage.getItem(\"user\")));\r\n            const userSaveMovie = saveMovies.filter(\r\n              (movie) => movie.owner === user._id\r\n            );\r\n            localStorage.setItem(\"saveMovies\", JSON.stringify(userSaveMovie));\r\n            localStorage.setItem(\"movies\", JSON.stringify(movies));\r\n            setSaveMovies(JSON.parse(localStorage.getItem(\"saveMovies\")));\r\n            setMovies(JSON.parse(localStorage.getItem(\"movies\")));\r\n            setLoaded(false);\r\n          })\r\n          .catch((err) => {\r\n            console.log(err);\r\n          });\r\n      }\r\n    }, 1000);\r\n  }, [loggedIn]);\r\n\r\n  useEffect(() => {\r\n    const token = localStorage.getItem(\"token\");\r\n    if (!token) {\r\n      setPermissonCheck(true);\r\n      return;\r\n    }\r\n    checkToken();\r\n    setPermissonCheck(true);\r\n    setLoggedIn(true);\r\n    setCheckedFilms(JSON.parse(localStorage.getItem(\"checkedFilms\")));\r\n    setCheckedSaveFilms(JSON.parse(localStorage.getItem(\"checkedSaveFilms\")));\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    setFilterMovies(JSON.parse(localStorage.getItem(\"moviesSearch\")));\r\n    setIsFiltered(JSON.parse(localStorage.getItem(\"isFiltered\")));\r\n  }, []);\r\n\r\n  // Обновление короткометражек\r\n  useEffect(() => {\r\n    setShortMovies(JSON.parse(localStorage.getItem(\"durationMovieShort\")));\r\n    setShortMoviesSave(\r\n      JSON.parse(localStorage.getItem(\"durationMovieShortSave\"))\r\n    );\r\n  }, []);\r\n\r\n  // Поиск фильмов\r\n  function handleEnter(search) {\r\n    const moviesFilter = movies\r\n      ? movies.filter((movie) => {\r\n          return movie.nameRU.toLowerCase().includes(search.toLowerCase());\r\n        })\r\n      : [];\r\n    localStorage.setItem(\"moviesSearch\", JSON.stringify(moviesFilter));\r\n    localStorage.setItem(\"isFiltered\", JSON.stringify(true));\r\n    localStorage.setItem(\"moviesSearchValue\", JSON.stringify(search));\r\n    setTimeout(() => {\r\n      setLoaded(false);\r\n      setFilterMovies(JSON.parse(localStorage.getItem(\"moviesSearch\")));\r\n      setIsFiltered(JSON.parse(localStorage.getItem(\"isFiltered\")));\r\n      setValueSearch(\r\n        JSON.parse(window.localStorage.getItem(\"moviesSearchValue\"))\r\n      );\r\n    }, 450);\r\n  }\r\n\r\n  // Сохранение фильма\r\n  function handleSaveMovie(movieData) {\r\n    setSaveMovies([...saveMovies, movieData]);\r\n    mainApi\r\n      .saveMovie(movieData)\r\n      .then((newMovie) => {\r\n        setSaveMovies([...saveMovies, newMovie]);\r\n        localStorage.setItem(\r\n          \"saveMovies\",\r\n          JSON.stringify([...saveMovies, newMovie])\r\n        );\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  }\r\n\r\n  // Поиск сохраненных фильмов\r\n  function handleSearchSaveMovie(search) {\r\n    const moviesSaveFilter = saveMovies\r\n      ? saveMovies.filter((movie) => {\r\n          return movie.nameRU.toLowerCase().includes(search.toLowerCase());\r\n        })\r\n      : [];\r\n    localStorage.setItem(\"isFilteredSave\", JSON.stringify(true));\r\n    setTimeout(() => {\r\n      setLoaded(false);\r\n      setFilterSaveMovies(moviesSaveFilter);\r\n      setIsFilteredSave(JSON.parse(localStorage.getItem(\"isFilteredSave\")));\r\n    }, 450);\r\n  }\r\n\r\n  // Функция удаления из избранного\r\n  function handleDeleteSaveMovie(saveMovie) {\r\n    mainApi\r\n      .deleteMovie(saveMovie._id || saveMovie.id)\r\n      .then(() => {\r\n        const newCardsArr = saveMovies.filter((c) => c._id !== saveMovie._id);\r\n        const newSavedCardsArr = saveMovies.filter(\r\n          (c) => c._id !== saveMovie._id\r\n        );\r\n        setSaveMovies(newCardsArr);\r\n        setFilterSaveMovies(newSavedCardsArr);\r\n        localStorage.removeItem(\"saveMovies\", JSON.stringify(newCardsArr));\r\n        localStorage.removeItem(\"saveMovies\", JSON.stringify(newSavedCardsArr));\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  }\r\n\r\n  // Регистрация\r\n  function handleRegistration(name, email, password) {\r\n    auth\r\n      .register(name, email, password)\r\n      .then((res) => {\r\n        if (res) {\r\n          handleAuthorization(email, password);\r\n          // history.push(\"/movies\");\r\n          navigate('/movies');\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  }\r\n\r\n  // Авторизация\r\n  function handleAuthorization(emailLogin, passwordLogin) {\r\n    auth\r\n      .authorization(emailLogin, passwordLogin)\r\n      .then((res) => {\r\n        if (res) {\r\n          localStorage.setItem(\"token\", res.token);\r\n          localStorage.setItem(\"moviesSearch\", JSON.stringify(filterMovies));\r\n          window.localStorage.setItem(\r\n            \"moviesSearchValue\",\r\n            JSON.stringify(valueSearch)\r\n          );\r\n          setLoggedIn(true);\r\n          history.push(\"/movies\");\r\n        }\r\n      })\r\n      .then(() => {\r\n        checkToken();\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  }\r\n\r\n  // Обновление пользователя\r\n  function handleUpdateUser(user) {\r\n    mainApi\r\n      .editProfile(user)\r\n      .then((user) => {\r\n        setCurrentUser(user);\r\n        localStorage.setItem(\"user\", JSON.stringify(user));\r\n      })\r\n      .catch((err) => {\r\n        console.log(`Внимание! ${err}`);\r\n      });\r\n  }\r\n\r\n  // Короткометражки фильмов\r\n  function checkShortFilms(e) {\r\n    setLoaded(true);\r\n    localStorage.setItem(\"checkedFilms\", JSON.stringify(!checkedFilms));\r\n    setTimeout(() => {\r\n      if (!checkedFilms) {\r\n        const durationMovieShort = movies.filter(\r\n          (movie) => movie.duration <= 40\r\n        );\r\n        const durationMovieShortSearch = filterMovies.filter(\r\n          (movie) => movie.duration <= 40\r\n        );\r\n        localStorage.setItem(\r\n          \"durationMovieShort\",\r\n          JSON.stringify(durationMovieShort)\r\n        );\r\n        localStorage.setItem(\r\n          \"durationMovieShort\",\r\n          JSON.stringify(durationMovieShortSearch)\r\n        );\r\n        setShortMovies(JSON.parse(localStorage.getItem(\"durationMovieShort\")));\r\n      } else {\r\n        setMovies(movies);\r\n      }\r\n      setLoaded(false);\r\n    }, 450);\r\n    setCheckedFilms(!checkedFilms);\r\n  }\r\n\r\n  // Короткометражки сохраненных фильмов\r\n  function checkShortFilmsSave(e) {\r\n    setLoaded(true);\r\n    localStorage.setItem(\"checkedSaveFilms\", JSON.stringify(!checkedSaveFilms));\r\n    setTimeout(() => {\r\n      if (!checkedSaveFilms) {\r\n        const durationMovieShortSave = saveMovies.filter(\r\n          (movie) => movie.duration <= 40\r\n        );\r\n\r\n        const durationMovieShortSaveSearch = saveFilterSaveMovies.filter(\r\n          (movie) => movie.duration <= 40\r\n        );\r\n\r\n        localStorage.setItem(\r\n          \"durationMovieShortSave\",\r\n          JSON.stringify(durationMovieShortSave)\r\n        );\r\n        localStorage.setItem(\r\n          \"durationMovieShortSaveSearch\",\r\n          JSON.stringify(durationMovieShortSaveSearch)\r\n        );\r\n        setShortMoviesSave(\r\n          JSON.parse(localStorage.getItem(\"durationMovieShortSave\"))\r\n        );\r\n      } else {\r\n        setSaveMovies(saveMovies);\r\n      }\r\n      setLoaded(false);\r\n    }, 450);\r\n    setCheckedSaveFilms(!checkedSaveFilms);\r\n  }\r\n\r\n  // Выход\r\n  function handleSignOut() {\r\n    setLoggedIn(false);\r\n    setCurrentUser([]);\r\n    setCheckedFilms(false);\r\n    setCheckedSaveFilms(false);\r\n    localStorage.clear();\r\n    history.push(\"/\");\r\n  }\r\n\r\n  if (!permissonCheck) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <CurrentUserContext.Provider value={currentUser}>\r\n      <div className=\"app\">\r\n        <Switch>\r\n          <Route exact path=\"/\" component={Main} />\r\n          <ProtectedRoute\r\n            path=\"/movies\"\r\n            component={Movies}\r\n            loggedIn={loggedIn}\r\n            handleEnter={handleEnter}\r\n            loaded={loaded}\r\n            isFiltered={isFiltered}\r\n            movies={movies}\r\n            filterMovies={filterMovies}\r\n            handleSaveMovie={handleSaveMovie}\r\n            saveMovies={saveMovies}\r\n            handleDeleteSaveMovie={(movie) => handleDeleteSaveMovie(movie)}\r\n            checkShortFilms={checkShortFilms}\r\n            onCheckedFilms={checkedFilms}\r\n            shortMovies={shortMovies}\r\n            pathMovies={pathMovies}\r\n            valueSearch={valueSearch}\r\n          />\r\n          <ProtectedRoute\r\n            path=\"/saved-movies\"\r\n            component={SavedMovies}\r\n            loggedIn={loggedIn}\r\n            loaded={loaded}\r\n            handleSearchSaveMovie={handleSearchSaveMovie}\r\n            isFilteredSave={isFilteredSave}\r\n            saveMovies={saveMovies}\r\n            handleDeleteSaveMovie={handleDeleteSaveMovie}\r\n            saveFilterSaveMovies={saveFilterSaveMovies}\r\n            checkShortFilmsSave={checkShortFilmsSave}\r\n            onCheckedSaveFilms={checkedSaveFilms}\r\n            shortMovies={shortMoviesSave}\r\n            pathMoviesSave={pathMoviesSave}\r\n          />\r\n          <ProtectedRoute\r\n            path=\"/profile\"\r\n            component={Profile}\r\n            onUpdateUser={handleUpdateUser}\r\n            handleSignOut={handleSignOut}\r\n            loggedIn={loggedIn}\r\n          />\r\n          <BlockRouteUser\r\n            path=\"/signin\"\r\n            component={Login}\r\n            handleAuthorization={handleAuthorization}\r\n            loggedIn={loggedIn}\r\n          />\r\n          <BlockRouteUser\r\n            path=\"/signup\"\r\n            component={Register}\r\n            handleRegistration={handleRegistration}\r\n            loggedIn={loggedIn}\r\n          />\r\n          <Route path=\"*\" component={NotFound} />\r\n        </Switch>\r\n      </div>\r\n    </CurrentUserContext.Provider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}